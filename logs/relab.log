2026-01-24 17:10:11,208 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.3.Final
2026-01-24 17:10:11,246 INFO o.s.b.StartupInfoLogger [main] Starting AlquilerControllerTests using Java 21.0.8 with PID 27396 (started by natal in D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab)
2026-01-24 17:10:11,247 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2026-01-24 17:10:13,091 INFO o.s.m.w.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2026-01-24 17:10:13,092 INFO o.s.w.s.FrameworkServlet [main] Initializing Servlet ''
2026-01-24 17:10:13,096 INFO o.s.w.s.FrameworkServlet [main] Completed initialization in 1 ms
2026-01-24 17:10:13,133 INFO o.s.b.StartupInfoLogger [main] Started AlquilerControllerTests in 2.23 seconds (process running for 3.015)
2026-01-24 17:10:13,274 WARN c.n.r.c.AlquilerController [main] DELETE /alquileres/99 - eliminando
2026-01-24 17:10:13,274 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: AlquilerNoEncontradoException
2026-01-24 17:10:13,444 INFO c.n.r.c.AlquilerController [main] POST /alquileres - creando nuevo alquiler
2026-01-24 17:10:13,444 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: ProductoNoEncontradoException
2026-01-24 17:10:13,456 INFO c.n.r.c.AlquilerController [main] GET /alquileres - Parámetros: arrendadorId=99, arrendatarioId=null, productoId=null
2026-01-24 17:10:13,463 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:10:13,478 INFO c.n.r.c.AlquilerController [main] PUT /alquileres/99 - actualizando alquiler
2026-01-24 17:10:13,482 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: AlquilerNoEncontradoException
2026-01-24 17:10:13,494 WARN c.n.r.c.AlquilerController [main] DELETE /alquileres/1 - eliminando
2026-01-24 17:10:13,494 INFO c.n.r.c.AlquilerController [main] Alquiler con id 1 eliminado correctamente
2026-01-24 17:10:13,520 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.AlquilerOutDto> com.natalia.relab.controller.AlquilerController.actualizarAlquiler(com.natalia.relab.dto.AlquilerUpdateDto,long) throws exception.AlquilerNoEncontradoException: [Field error in object 'alquilerUpdateDto' on field 'precio': rejected value [-10.0]; codes [Min.alquilerUpdateDto.precio,Min.precio,Min.java.lang.Float,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [alquilerUpdateDto.precio,precio]; arguments []; default message [precio],0]; default message [El precio debe ser mayor que cero]] 
2026-01-24 17:10:13,583 INFO c.n.r.c.AlquilerController [main] GET /alquileres/1 solicitado
2026-01-24 17:10:13,583 INFO c.n.r.c.AlquilerController [main] Alquiler con id 1 encontrado
2026-01-24 17:10:13,603 INFO c.n.r.c.AlquilerController [main] GET /alquileres/99 solicitado
2026-01-24 17:10:13,604 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: AlquilerNoEncontradoException
2026-01-24 17:10:13,612 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.AlquilerOutDto> com.natalia.relab.controller.AlquilerController.agregarAlquiler(com.natalia.relab.dto.AlquilerInDto) throws exception.UsuarioNoEncontradoException,exception.ProductoNoEncontradoException with 4 errors: [Field error in object 'alquilerInDto' on field 'productoId': rejected value [null]; codes [NotNull.alquilerInDto.productoId,NotNull.productoId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [alquilerInDto.productoId,productoId]; arguments []; default message [productoId]]; default message [Debe especificarse el producto alquilado]] [Field error in object 'alquilerInDto' on field 'arrendadorId': rejected value [null]; codes [NotNull.alquilerInDto.arrendadorId,NotNull.arrendadorId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [alquilerInDto.arrendadorId,arrendadorId]; arguments []; default message [arrendadorId]]; default message [Debe especificarse el arrendador]] [Field error in object 'alquilerInDto' on field 'arrendatarioId': rejected value [null]; codes [NotNull.alquilerInDto.arrendatarioId,NotNull.arrendatarioId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [alquilerInDto.arrendatarioId,arrendatarioId]; arguments []; default message [arrendatarioId]]; default message [Debe especificarse el arrendatario]] [Field error in object 'alquilerInDto' on field 'precio': rejected value [-10.0]; codes [Min.alquilerInDto.precio,Min.precio,Min.float,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [alquilerInDto.precio,precio]; arguments []; default message [precio],0]; default message [El precio debe ser mayor que cero]] 
2026-01-24 17:10:13,619 INFO c.n.r.c.AlquilerController [main] GET /alquileres - Parámetros: arrendadorId=5, arrendatarioId=null, productoId=null
2026-01-24 17:10:13,619 INFO c.n.r.c.AlquilerController [main] Resultado: 1 alquileres encontrados
2026-01-24 17:10:13,640 INFO c.n.r.c.AlquilerController [main] GET /alquileres - Parámetros: arrendadorId=null, arrendatarioId=null, productoId=null
2026-01-24 17:10:13,640 INFO c.n.r.c.AlquilerController [main] Resultado: 2 alquileres encontrados
2026-01-24 17:10:13,644 INFO c.n.r.c.AlquilerController [main] PUT /alquileres/1 - actualizando alquiler
2026-01-24 17:10:13,644 INFO c.n.r.c.AlquilerController [main] Alquiler con id 1 actualizado correctamente
2026-01-24 17:10:13,653 INFO c.n.r.c.AlquilerController [main] POST /alquileres - creando nuevo alquiler
2026-01-24 17:10:13,653 INFO c.n.r.c.AlquilerController [main] Alquiler creado con id 100
2026-01-24 17:10:13,941 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=null, arrendatarioId=null, productoId=5
2026-01-24 17:10:13,953 INFO c.n.r.s.AlquilerService [main] Servicio: buscando alquiler por ID 999
2026-01-24 17:10:13,954 ERROR c.n.r.s.AlquilerService [main] No existe alquiler con ID 999
2026-01-24 17:10:13,959 INFO c.n.r.s.AlquilerService [main] Agregando nuevo alquiler: productoId 1, arrendadorId 2, arrendatarioId 3
2026-01-24 17:10:13,960 WARN c.n.r.s.AlquilerService [main] Producto con ID 1 no encontrado
2026-01-24 17:10:13,964 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=1, arrendatarioId=null, productoId=10
2026-01-24 17:10:13,970 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=null, arrendatarioId=null, productoId=999
2026-01-24 17:10:13,973 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=null, arrendatarioId=null, productoId=null
2026-01-24 17:10:13,973 WARN c.n.r.s.AlquilerService [main] Servicio: Intentando eliminar alquiler con ID 999
2026-01-24 17:10:13,973 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=null, arrendatarioId=999, productoId=null
2026-01-24 17:10:13,984 WARN c.n.r.s.AlquilerService [main] Servicio: Intentando eliminar alquiler con ID 1
2026-01-24 17:10:13,984 INFO c.n.r.s.AlquilerService [main] Alquiler con ID 1 eliminado correctamente
2026-01-24 17:10:13,995 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=999, arrendatarioId=null, productoId=null
2026-01-24 17:10:13,999 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=2, arrendatarioId=null, productoId=null
2026-01-24 17:10:14,003 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=null, arrendatarioId=3, productoId=null
2026-01-24 17:10:14,004 INFO c.n.r.s.AlquilerService [main] Servicio: buscando alquiler por ID 1
2026-01-24 17:10:14,010 INFO c.n.r.s.AlquilerService [main] Agregando nuevo alquiler: productoId 1, arrendadorId 2, arrendatarioId 3
2026-01-24 17:10:14,010 INFO c.n.r.s.AlquilerService [main] Alquiler creado correctamente con ID 1
2026-01-24 17:10:14,015 INFO c.n.r.s.AlquilerService [main] Servicio: Modificando alquiler con ID 1
2026-01-24 17:10:14,015 INFO c.n.r.s.AlquilerService [main] Servicio: Alquiler actualizado correctamente con ID 1
2026-01-24 17:10:14,022 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [com.natalia.relab.CategoriaControllerTests]: CategoriaControllerTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-24 17:10:14,033 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration com.natalia.relab.RelabApplication for test class com.natalia.relab.CategoriaControllerTests
2026-01-24 17:10:14,055 INFO o.s.b.StartupInfoLogger [main] Starting CategoriaControllerTests using Java 21.0.8 with PID 27396 (started by natal in D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab)
2026-01-24 17:10:14,055 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2026-01-24 17:10:14,256 INFO o.s.m.w.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2026-01-24 17:10:14,256 INFO o.s.w.s.FrameworkServlet [main] Initializing Servlet ''
2026-01-24 17:10:14,257 INFO o.s.w.s.FrameworkServlet [main] Completed initialization in 0 ms
2026-01-24 17:10:14,261 INFO o.s.b.StartupInfoLogger [main] Started CategoriaControllerTests in 0.224 seconds (process running for 4.137)
2026-01-24 17:10:14,266 INFO c.n.r.c.CategoriaController [main] GET /categorias/1 - Solicitando categoría por ID
2026-01-24 17:10:14,267 INFO c.n.r.c.CategoriaController [main] GET /categorias/1 - Categoría encontrada correctamente
2026-01-24 17:10:14,291 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.CategoriaOutDto> com.natalia.relab.controller.CategoriaController.agregarCategorias(com.natalia.relab.dto.CategoriaInDto) with 2 errors: [Field error in object 'categoriaInDto' on field 'nombre': rejected value []; codes [NotBlank.categoriaInDto.nombre,NotBlank.nombre,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categoriaInDto.nombre,nombre]; arguments []; default message [nombre]]; default message [El nombre es un campo obligatorio]] [Field error in object 'categoriaInDto' on field 'descripcion': rejected value [abcd]; codes [Size.categoriaInDto.descripcion,Size.descripcion,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categoriaInDto.descripcion,descripcion]; arguments []; default message [descripcion],2147483647,10]; default message [La descripción debe tener al menos 10 caracteres]] 
2026-01-24 17:10:14,303 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.CategoriaOutDto> com.natalia.relab.controller.CategoriaController.actualizarCategoria(com.natalia.relab.dto.CategoriaUpdateDto,long) throws exception.CategoriaNoEncontradaException with 2 errors: [Field error in object 'categoriaUpdateDto' on field 'nombre': rejected value []; codes [Size.categoriaUpdateDto.nombre,Size.nombre,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categoriaUpdateDto.nombre,nombre]; arguments []; default message [nombre],2147483647,1]; default message [El nombre no puede estar vacío]] [Field error in object 'categoriaUpdateDto' on field 'descripcion': rejected value [Corta]; codes [Size.categoriaUpdateDto.descripcion,Size.descripcion,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categoriaUpdateDto.descripcion,descripcion]; arguments []; default message [descripcion],2147483647,10]; default message [La descripción debe tener al menos 10 caracteres]] 
2026-01-24 17:10:14,309 WARN c.n.r.c.CategoriaController [main] DELETE /categorias/1 - Eliminación solicitada
2026-01-24 17:10:14,310 INFO c.n.r.c.CategoriaController [main] Categoría 1 eliminada correctamente
2026-01-24 17:10:14,319 INFO c.n.r.c.CategoriaController [main] PUT /categorias/1 - Actualización de categoría solicitada
2026-01-24 17:10:14,320 INFO c.n.r.c.CategoriaController [main] PUT /categorias/1 - Categoría actualizada correctamente
2026-01-24 17:10:14,325 WARN c.n.r.c.CategoriaController [main] DELETE /categorias/999 - Eliminación solicitada
2026-01-24 17:10:14,327 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CategoriaNoEncontradaException
2026-01-24 17:10:14,332 INFO c.n.r.c.CategoriaController [main] PUT /categorias/999 - Actualización de categoría solicitada
2026-01-24 17:10:14,334 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CategoriaNoEncontradaException
2026-01-24 17:10:14,340 INFO c.n.r.c.CategoriaController [main] POST /categorias - Creación de nueva categoría solicitada
2026-01-24 17:10:14,341 INFO c.n.r.c.CategoriaController [main] POST /categorias - Nueva categoría creada con ID 1
2026-01-24 17:10:14,345 INFO c.n.r.c.CategoriaController [main] GET /categorias/99 - Solicitando categoría por ID
2026-01-24 17:10:14,347 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CategoriaNoEncontradaException
2026-01-24 17:10:14,366 INFO c.n.r.c.CategoriaController [main] GET /categorías - filtros: nombre='Microscopios', activa=null, fechaCreacion=null, desde=null, hasta=null
2026-01-24 17:10:14,366 INFO c.n.r.c.CategoriaController [main] Se devolvieron 1 categorias
2026-01-24 17:10:14,372 INFO c.n.r.c.CategoriaController [main] GET /categorías - filtros: nombre='null', activa=null, fechaCreacion=null, desde=null, hasta=null
2026-01-24 17:10:14,373 INFO c.n.r.c.CategoriaController [main] Se devolvieron 2 categorias
2026-01-24 17:10:14,416 INFO c.n.r.s.CategoriaService [main] Buscando categoría por ID 99
2026-01-24 17:10:14,417 ERROR c.n.r.s.CategoriaService [main] Categoría 99 no encontrada
2026-01-24 17:10:14,420 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: null, fechaCreacion: null, desde: null, hasta: 2025-11-30
2026-01-24 17:10:14,424 INFO c.n.r.s.CategoriaService [main] Intentando crear nueva categoría
2026-01-24 17:10:14,425 INFO c.n.r.s.CategoriaService [main] Categoría creada con ID 1
2026-01-24 17:10:14,429 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: null, fechaCreacion: 2025-11-23, desde: null, hasta: null
2026-01-24 17:10:14,433 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: true, fechaCreacion: null, desde: null, hasta: null
2026-01-24 17:10:14,437 WARN c.n.r.s.CategoriaService [main] Intentando eliminar categoría 1
2026-01-24 17:10:14,438 INFO c.n.r.s.CategoriaService [main] Categoría 1 eliminada correctamente
2026-01-24 17:10:14,441 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: Centrífugas, activa: null, fechaCreacion: null, desde: null, hasta: null
2026-01-24 17:10:14,445 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: null, fechaCreacion: null, desde: 2025-11-01, hasta: 2025-11-30
2026-01-24 17:10:14,449 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: null, fechaCreacion: null, desde: null, hasta: null
2026-01-24 17:10:14,452 WARN c.n.r.s.CategoriaService [main] Intentando eliminar categoría 99
2026-01-24 17:10:14,453 ERROR c.n.r.s.CategoriaService [main] Categoría 99 no encontrada
2026-01-24 17:10:14,457 INFO c.n.r.s.CategoriaService [main] Intentando modificar categoría con ID 1
2026-01-24 17:10:14,458 INFO c.n.r.s.CategoriaService [main] Categoría 1 actualizada correctamente
2026-01-24 17:10:14,461 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: null, fechaCreacion: null, desde: 2025-11-01, hasta: null
2026-01-24 17:10:14,464 INFO c.n.r.s.CategoriaService [main] Buscando categoría por ID 1
2026-01-24 17:10:14,469 INFO c.n.r.s.CategoriaService [main] Intentando modificar categoría con ID 99
2026-01-24 17:10:14,469 ERROR c.n.r.s.CategoriaService [main] Categoría 99 no encontrada
2026-01-24 17:10:14,475 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [com.natalia.relab.CompraventaControllerTests]: CompraventaControllerTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-24 17:10:14,482 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration com.natalia.relab.RelabApplication for test class com.natalia.relab.CompraventaControllerTests
2026-01-24 17:10:14,497 INFO o.s.b.StartupInfoLogger [main] Starting CompraventaControllerTests using Java 21.0.8 with PID 27396 (started by natal in D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab)
2026-01-24 17:10:14,498 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2026-01-24 17:10:14,642 INFO o.s.m.w.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2026-01-24 17:10:14,643 INFO o.s.w.s.FrameworkServlet [main] Initializing Servlet ''
2026-01-24 17:10:14,644 INFO o.s.w.s.FrameworkServlet [main] Completed initialization in 1 ms
2026-01-24 17:10:14,644 INFO o.s.b.StartupInfoLogger [main] Started CompraventaControllerTests in 0.159 seconds (process running for 4.524)
2026-01-24 17:10:14,655 INFO c.n.r.c.CompraventaController [main] POST /compraventas - creando compraventa para productoId 1 entre compradorId 2 y vendedorId 3
2026-01-24 17:10:14,655 INFO c.n.r.c.CompraventaController [main] Compraventa creada con id 1
2026-01-24 17:10:14,665 INFO c.n.r.c.CompraventaController [main] POST /compraventas - creando compraventa para productoId 99 entre compradorId 1 y vendedorId 2
2026-01-24 17:10:14,665 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: ProductoNoEncontradoException
2026-01-24 17:10:14,673 INFO c.n.r.c.CompraventaController [main] GET /compraventas - Filtros recibidos -> compradorId=null, vendedorId=null, productoId=null
2026-01-24 17:10:14,673 INFO c.n.r.c.CompraventaController [main] Resultado: 1 compraventas encontradas
2026-01-24 17:10:14,673 WARN c.n.r.c.CompraventaController [main] DELETE /compraventas/1 solicitado
2026-01-24 17:10:14,673 INFO c.n.r.c.CompraventaController [main] Compraventa con id 1 eliminada correctamente
2026-01-24 17:10:14,684 WARN c.n.r.c.CompraventaController [main] DELETE /compraventas/99 solicitado
2026-01-24 17:10:14,686 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CompraventaNoEncontradaException
2026-01-24 17:10:14,695 INFO c.n.r.c.CompraventaController [main] PUT /compraventas/1 actualizando
2026-01-24 17:10:14,695 INFO c.n.r.c.CompraventaController [main] Compraventa con id 1 actualizada correctamente
2026-01-24 17:10:14,700 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.CompraventaOutDto> com.natalia.relab.controller.CompraventaController.actualizarCompraventa(com.natalia.relab.dto.CompraventaUpdateDto,long) throws exception.CompraventaNoEncontradaException: [Field error in object 'compraventaUpdateDto' on field 'precioFinal': rejected value [-5.0]; codes [Min.compraventaUpdateDto.precioFinal,Min.precioFinal,Min.java.lang.Float,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [compraventaUpdateDto.precioFinal,precioFinal]; arguments []; default message [precioFinal],0]; default message [El precio debe ser mayor que cero]] 
2026-01-24 17:10:14,705 INFO c.n.r.c.CompraventaController [main] POST /compraventas - creando compraventa para productoId 1 entre compradorId 2 y vendedorId 3
2026-01-24 17:10:14,706 WARN c.n.r.c.GlobalExceptionHandler [main] Conflicto: producto ya vendido
2026-01-24 17:10:14,710 INFO c.n.r.c.CompraventaController [main] GET /compraventas/1 solicitado
2026-01-24 17:10:14,710 INFO c.n.r.c.CompraventaController [main] Compraventa con id 1 encontrada
2026-01-24 17:10:14,715 INFO c.n.r.c.CompraventaController [main] GET /compraventas/99 solicitado
2026-01-24 17:10:14,717 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CompraventaNoEncontradaException
2026-01-24 17:10:14,721 INFO c.n.r.c.CompraventaController [main] GET /compraventas - Filtros recibidos -> compradorId=99, vendedorId=null, productoId=null
2026-01-24 17:10:14,722 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:10:14,727 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.CompraventaOutDto> com.natalia.relab.controller.CompraventaController.agregarCompraventa(com.natalia.relab.dto.CompraventaInDto) throws exception.UsuarioNoEncontradoException,exception.ProductoNoEncontradoException,exception.ProductoYaVendidoException: [Field error in object 'compraventaInDto' on field 'productoId': rejected value [null]; codes [NotNull.compraventaInDto.productoId,NotNull.productoId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [compraventaInDto.productoId,productoId]; arguments []; default message [productoId]]; default message [Debe especificarse el producto comprado/vendido]] 
2026-01-24 17:10:14,774 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=null, productoId=5
2026-01-24 17:10:14,774 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=10, vendedorId=null, productoId=null
2026-01-24 17:10:14,774 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=20, productoId=null
2026-01-24 17:10:14,784 WARN c.n.r.s.CompraventaService [main] Servicio: Eliminar compraventa 999
2026-01-24 17:10:14,784 ERROR c.n.r.s.CompraventaService [main] Compraventa 999 no encontrada para eliminar
2026-01-24 17:10:14,789 WARN c.n.r.s.CompraventaService [main] Servicio: Eliminar compraventa 1
2026-01-24 17:10:14,789 INFO c.n.r.s.CompraventaService [main] Compraventa 1 eliminada correctamente
2026-01-24 17:10:14,794 INFO c.n.r.s.CompraventaService [main] Agregando compraventa de producto id 1 entre comprador id 2 y vendedor id 3
2026-01-24 17:10:14,794 WARN c.n.r.s.CompraventaService [main] Producto 1 ya ha sido vendido. Operación cancelada
2026-01-24 17:10:14,794 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=null, productoId=null
2026-01-24 17:10:14,802 INFO c.n.r.s.CompraventaService [main] Servicio: Modificar compraventa por ID 1
2026-01-24 17:10:14,803 INFO c.n.r.s.CompraventaService [main] Compraventa 1 actualizada correctamente
2026-01-24 17:10:14,805 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=null, productoId=5
2026-01-24 17:10:14,805 INFO c.n.r.s.CompraventaService [main] Servicio: Buscar compraventa por ID 999
2026-01-24 17:10:14,805 ERROR c.n.r.s.CompraventaService [main] Compraventa no encontrada con ID 999
2026-01-24 17:10:14,814 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=null, productoId=99
2026-01-24 17:10:14,816 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=999, productoId=null
2026-01-24 17:10:14,823 INFO c.n.r.s.CompraventaService [main] Servicio: Buscar compraventa por ID 1
2026-01-24 17:10:14,825 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=999, vendedorId=null, productoId=null
2026-01-24 17:10:14,827 INFO c.n.r.s.CompraventaService [main] Agregando compraventa de producto id 1 entre comprador id 2 y vendedor id 3
2026-01-24 17:10:14,829 INFO c.n.r.s.CompraventaService [main] Compraventa creada correctamente. ID=1
2026-01-24 17:10:14,842 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [com.natalia.relab.ProductoControllerTests]: ProductoControllerTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-24 17:10:14,847 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration com.natalia.relab.RelabApplication for test class com.natalia.relab.ProductoControllerTests
2026-01-24 17:10:14,853 INFO o.s.b.StartupInfoLogger [main] Starting ProductoControllerTests using Java 21.0.8 with PID 27396 (started by natal in D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab)
2026-01-24 17:10:14,853 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2026-01-24 17:10:14,993 INFO o.s.m.w.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2026-01-24 17:10:14,993 INFO o.s.w.s.FrameworkServlet [main] Initializing Servlet ''
2026-01-24 17:10:14,993 INFO o.s.w.s.FrameworkServlet [main] Completed initialization in 0 ms
2026-01-24 17:10:15,004 INFO o.s.b.StartupInfoLogger [main] Started ProductoControllerTests in 0.157 seconds (process running for 4.879)
2026-01-24 17:10:15,024 INFO c.n.r.c.ProductoController [main] POST /productos - creando nuevo producto. Nombre=Producto Test, UsuarioId=1, CategoriaId=999
2026-01-24 17:10:15,032 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CategoriaNoEncontradaException
2026-01-24 17:10:15,040 INFO c.n.r.c.ProductoController [main] PUT /productos/999 - actualización solicitada
2026-01-24 17:10:15,043 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: ProductoNoEncontradoException
2026-01-24 17:10:15,047 INFO c.n.r.c.ProductoController [main] GET /productos/999 - solicitando producto por ID
2026-01-24 17:10:15,048 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: ProductoNoEncontradoException
2026-01-24 17:10:15,054 INFO c.n.r.c.ProductoController [main] POST /productos - creando nuevo producto. Nombre=Producto Test, UsuarioId=999, CategoriaId=null
2026-01-24 17:10:15,055 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:10:15,061 INFO c.n.r.c.ProductoController [main] GET /productos - filtros: nombre=Producto Test, activo=null, categoriaId=null, usuarioId=null
2026-01-24 17:10:15,062 INFO c.n.r.c.ProductoController [main] GET /productos - encontrados 1 productos
2026-01-24 17:10:15,066 WARN c.n.r.c.ProductoController [main] DELETE /productos/999 - eliminación solicitada
2026-01-24 17:10:15,066 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: ProductoNoEncontradoException
2026-01-24 17:10:15,074 INFO c.n.r.c.ProductoController [main] GET /productos/1 - solicitando producto por ID
2026-01-24 17:10:15,074 INFO c.n.r.c.ProductoController [main] GET /productos/1 - producto encontrado correctamente
2026-01-24 17:10:15,074 WARN c.n.r.c.ProductoController [main] DELETE /productos/1 - eliminación solicitada
2026-01-24 17:10:15,082 WARN c.n.r.c.ProductoController [main] DELETE /productos/1 - producto eliminado
2026-01-24 17:10:15,083 INFO c.n.r.c.ProductoController [main] PUT /productos/1 - actualización solicitada
2026-01-24 17:10:15,083 INFO c.n.r.c.ProductoController [main] PUT /productos/1 - producto actualizado correctamente
2026-01-24 17:10:15,090 INFO c.n.r.c.ProductoController [main] GET /productos - filtros: nombre=null, activo=null, categoriaId=999, usuarioId=null
2026-01-24 17:10:15,092 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CategoriaNoEncontradaException
2026-01-24 17:10:15,093 INFO c.n.r.c.ProductoController [main] POST /productos - creando nuevo producto. Nombre=Producto Test, UsuarioId=1, CategoriaId=2
2026-01-24 17:10:15,093 INFO c.n.r.c.ProductoController [main] POST /productos - producto creado con ID 10
2026-01-24 17:10:15,097 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.ProductoOutDto> com.natalia.relab.controller.ProductoController.actualizarProducto(com.natalia.relab.dto.ProductoUpdateDto,long) throws exception.ProductoNoEncontradoException,exception.CategoriaNoEncontradaException: [Field error in object 'productoUpdateDto' on field 'nombre': rejected value []; codes [Size.productoUpdateDto.nombre,Size.nombre,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [productoUpdateDto.nombre,nombre]; arguments []; default message [nombre],2147483647,1]; default message [El nombre no puede estar vacío]] 
2026-01-24 17:10:15,105 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.ProductoOutDto> com.natalia.relab.controller.ProductoController.agregarProducto(com.natalia.relab.dto.ProductoInDto) throws exception.CategoriaNoEncontradaException,exception.UsuarioNoEncontradoException: [Field error in object 'productoInDto' on field 'nombre': rejected value [null]; codes [NotBlank.productoInDto.nombre,NotBlank.nombre,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [productoInDto.nombre,nombre]; arguments []; default message [nombre]]; default message [El nombre del producto es un campo obligatorio]] 
2026-01-24 17:10:15,122 WARN c.n.r.s.ProductoService [main] Producto 999 no encontrado
2026-01-24 17:10:15,127 WARN c.n.r.s.ProductoService [main] Servicio: eliminando producto 5
2026-01-24 17:10:15,127 WARN c.n.r.s.ProductoService [main] Producto 5 eliminado correctamente
2026-01-24 17:10:15,134 INFO c.n.r.s.ProductoService [main] Servicio: creando producto 'Producto1'
2026-01-24 17:10:15,136 WARN c.n.r.s.ProductoService [main] Usuario 99 no encontrado
2026-01-24 17:10:15,140 WARN c.n.r.s.ProductoService [main] Servicio: eliminando producto 999
2026-01-24 17:10:15,140 WARN c.n.r.s.ProductoService [main] Producto 999 no encontrado al intentar eliminar
2026-01-24 17:10:15,148 INFO c.n.r.s.ProductoService [main] Servicio: actualizando producto 1
2026-01-24 17:10:15,150 INFO c.n.r.s.ProductoService [main] Producto 1 actualizado correctamente
2026-01-24 17:10:15,158 INFO c.n.r.s.ProductoService [main] Servicio: actualizando producto 999
2026-01-24 17:10:15,158 WARN c.n.r.s.ProductoService [main] Producto 999 no encontrado al intentar actualizar
2026-01-24 17:10:15,168 INFO c.n.r.s.ProductoService [main] Servicio: creando producto 'Producto1'
2026-01-24 17:10:15,169 INFO c.n.r.s.ProductoService [main] Producto creado con ID 100
2026-01-24 17:10:15,175 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [com.natalia.relab.UsuarioControllerTests]: UsuarioControllerTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-24 17:10:15,180 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration com.natalia.relab.RelabApplication for test class com.natalia.relab.UsuarioControllerTests
2026-01-24 17:10:15,191 INFO o.s.b.StartupInfoLogger [main] Starting UsuarioControllerTests using Java 21.0.8 with PID 27396 (started by natal in D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab)
2026-01-24 17:10:15,193 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2026-01-24 17:10:15,333 INFO o.s.m.w.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2026-01-24 17:10:15,333 INFO o.s.w.s.FrameworkServlet [main] Initializing Servlet ''
2026-01-24 17:10:15,333 INFO o.s.w.s.FrameworkServlet [main] Completed initialization in 0 ms
2026-01-24 17:10:15,333 INFO o.s.b.StartupInfoLogger [main] Started UsuarioControllerTests in 0.151 seconds (process running for 5.216)
2026-01-24 17:10:15,348 INFO c.n.r.c.UsuarioController [main] GET /usuarios - filtros: nickname=user1, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:10:15,348 INFO c.n.r.c.UsuarioController [main] Resultado: 1 usuarios encontrados
2026-01-24 17:10:15,353 INFO c.n.r.c.UsuarioController [main] GET /usuarios/99 solicitado
2026-01-24 17:10:15,359 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:10:15,394 INFO c.n.r.c.UsuarioController [main] POST /usuarios - creando usuario con nickname natalia
2026-01-24 17:10:15,394 INFO c.n.r.c.UsuarioController [main] Usuario creado con id 1
2026-01-24 17:10:15,406 INFO c.n.r.c.UsuarioController [main] PUT /usuarios/5 - actualización solicitada
2026-01-24 17:10:15,406 INFO c.n.r.c.UsuarioController [main] Usuario 5 actualizado correctamente
2026-01-24 17:10:15,406 INFO c.n.r.c.UsuarioController [main] GET /usuarios - filtros: nickname=inexistente, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:10:15,410 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:10:15,414 INFO c.n.r.c.UsuarioController [main] GET /usuarios - filtros: nickname=null, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:10:15,414 INFO c.n.r.c.UsuarioController [main] Resultado: 2 usuarios encontrados
2026-01-24 17:10:15,420 INFO c.n.r.c.UsuarioController [main] PUT /usuarios/5 - actualización solicitada
2026-01-24 17:10:15,420 WARN c.n.r.c.GlobalExceptionHandler [main] Intento de creación con datos duplicados: NicknameYaExisteException
2026-01-24 17:10:15,423 INFO c.n.r.c.UsuarioController [main] PUT /usuarios/999 - actualización solicitada
2026-01-24 17:10:15,423 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:10:15,429 INFO c.n.r.c.UsuarioController [main] GET /usuarios/1 solicitado
2026-01-24 17:10:15,429 INFO c.n.r.c.UsuarioController [main] Usuario con id 1 encontrado
2026-01-24 17:10:15,433 WARN c.n.r.c.UsuarioController [main] DELETE /usuarios/5 solicitado
2026-01-24 17:10:15,433 INFO c.n.r.c.UsuarioController [main] Usuario 5 eliminado correctamente
2026-01-24 17:10:15,439 WARN c.n.r.c.UsuarioController [main] DELETE /usuarios/999 solicitado
2026-01-24 17:10:15,439 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:10:15,445 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.UsuarioOutDto> com.natalia.relab.controller.UsuarioController.agregarUsuario(com.natalia.relab.dto.UsuarioInDto) with 3 errors: [Field error in object 'usuarioInDto' on field 'nickname': rejected value []; codes [NotBlank.usuarioInDto.nickname,NotBlank.nickname,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [usuarioInDto.nickname,nickname]; arguments []; default message [nickname]]; default message [El nickname es un campo obligatorio]] [Field error in object 'usuarioInDto' on field 'password': rejected value [123]; codes [Size.usuarioInDto.password,Size.password,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [usuarioInDto.password,password]; arguments []; default message [password],2147483647,4]; default message [La contraseña debe tener al menos 4 carácteres]] [Field error in object 'usuarioInDto' on field 'email': rejected value [email-mal]; codes [Email.usuarioInDto.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [usuarioInDto.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@74f54f8e,.*]; default message [El formato de email no es válido]] 
2026-01-24 17:10:15,452 INFO c.n.r.s.UsuarioService [main] Buscando usuario por id 999
2026-01-24 17:10:15,453 ERROR c.n.r.s.UsuarioService [main] Usuario con id 999 no encontrado
2026-01-24 17:10:15,456 INFO c.n.r.s.UsuarioService [main] Modificando usuario con id 999
2026-01-24 17:10:15,456 ERROR c.n.r.s.UsuarioService [main] Usuario 999 no encontrado para modificar
2026-01-24 17:10:15,456 INFO c.n.r.s.UsuarioService [main] Agregando usuario con nickname usuarioExistente
2026-01-24 17:10:15,456 ERROR c.n.r.s.UsuarioService [main] Error: nickname usuarioExistente ya existe
2026-01-24 17:10:15,462 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=null, tipoUsuario=empresa, cuentaActiva=null
2026-01-24 17:10:15,463 INFO c.n.r.s.UsuarioService [main] Agregando usuario con nickname usuario1
2026-01-24 17:10:15,467 INFO c.n.r.s.UsuarioService [main] Usuario creado con id 42
2026-01-24 17:10:15,467 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=null, tipoUsuario=null, cuentaActiva=true
2026-01-24 17:10:15,472 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=null, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:10:15,474 INFO c.n.r.s.UsuarioService [main] Modificando usuario con id 5
2026-01-24 17:10:15,474 INFO c.n.r.s.UsuarioService [main] Usuario 5 modificado correctamente
2026-01-24 17:10:15,477 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=usuarioInexistente, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:10:15,480 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=usuario1, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:10:15,483 WARN c.n.r.s.UsuarioService [main] Eliminando usuario con id 999
2026-01-24 17:10:15,484 ERROR c.n.r.s.UsuarioService [main] No se puede eliminar, el usuario 999 no existe
2026-01-24 17:10:15,488 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=usuario1, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:10:15,490 INFO c.n.r.s.UsuarioService [main] Buscando usuario por id 10
2026-01-24 17:10:15,493 WARN c.n.r.s.UsuarioService [main] Eliminando usuario con id 10
2026-01-24 17:10:15,494 INFO c.n.r.s.UsuarioService [main] Usuario 10 eliminado
2026-01-24 17:16:36,443 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.3.Final
2026-01-24 17:16:36,482 INFO o.s.b.StartupInfoLogger [main] Starting AlquilerControllerTests using Java 21.0.8 with PID 628 (started by natal in D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab)
2026-01-24 17:16:36,482 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2026-01-24 17:16:38,159 INFO o.s.m.w.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2026-01-24 17:16:38,159 INFO o.s.w.s.FrameworkServlet [main] Initializing Servlet ''
2026-01-24 17:16:38,159 INFO o.s.w.s.FrameworkServlet [main] Completed initialization in 0 ms
2026-01-24 17:16:38,213 INFO o.s.b.StartupInfoLogger [main] Started AlquilerControllerTests in 2.006 seconds (process running for 2.698)
2026-01-24 17:16:38,363 WARN c.n.r.c.AlquilerController [main] DELETE /alquileres/99 - eliminando
2026-01-24 17:16:38,363 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: AlquilerNoEncontradoException
2026-01-24 17:16:38,521 INFO c.n.r.c.AlquilerController [main] POST /alquileres - creando nuevo alquiler
2026-01-24 17:16:38,522 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: ProductoNoEncontradoException
2026-01-24 17:16:38,534 INFO c.n.r.c.AlquilerController [main] GET /alquileres - Parámetros: arrendadorId=99, arrendatarioId=null, productoId=null
2026-01-24 17:16:38,536 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:16:38,550 INFO c.n.r.c.AlquilerController [main] PUT /alquileres/99 - actualizando alquiler
2026-01-24 17:16:38,550 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: AlquilerNoEncontradoException
2026-01-24 17:16:38,550 WARN c.n.r.c.AlquilerController [main] DELETE /alquileres/1 - eliminando
2026-01-24 17:16:38,566 INFO c.n.r.c.AlquilerController [main] Alquiler con id 1 eliminado correctamente
2026-01-24 17:16:38,592 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.AlquilerOutDto> com.natalia.relab.controller.AlquilerController.actualizarAlquiler(com.natalia.relab.dto.AlquilerUpdateDto,long) throws exception.AlquilerNoEncontradoException: [Field error in object 'alquilerUpdateDto' on field 'precio': rejected value [-10.0]; codes [Min.alquilerUpdateDto.precio,Min.precio,Min.java.lang.Float,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [alquilerUpdateDto.precio,precio]; arguments []; default message [precio],0]; default message [El precio debe ser mayor que cero]] 
2026-01-24 17:16:38,654 INFO c.n.r.c.AlquilerController [main] GET /alquileres/1 solicitado
2026-01-24 17:16:38,655 INFO c.n.r.c.AlquilerController [main] Alquiler con id 1 encontrado
2026-01-24 17:16:38,659 INFO c.n.r.c.AlquilerController [main] GET /alquileres/99 solicitado
2026-01-24 17:16:38,659 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: AlquilerNoEncontradoException
2026-01-24 17:16:38,678 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.AlquilerOutDto> com.natalia.relab.controller.AlquilerController.agregarAlquiler(com.natalia.relab.dto.AlquilerInDto) throws exception.UsuarioNoEncontradoException,exception.ProductoNoEncontradoException with 4 errors: [Field error in object 'alquilerInDto' on field 'productoId': rejected value [null]; codes [NotNull.alquilerInDto.productoId,NotNull.productoId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [alquilerInDto.productoId,productoId]; arguments []; default message [productoId]]; default message [Debe especificarse el producto alquilado]] [Field error in object 'alquilerInDto' on field 'precio': rejected value [-10.0]; codes [Min.alquilerInDto.precio,Min.precio,Min.float,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [alquilerInDto.precio,precio]; arguments []; default message [precio],0]; default message [El precio debe ser mayor que cero]] [Field error in object 'alquilerInDto' on field 'arrendatarioId': rejected value [null]; codes [NotNull.alquilerInDto.arrendatarioId,NotNull.arrendatarioId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [alquilerInDto.arrendatarioId,arrendatarioId]; arguments []; default message [arrendatarioId]]; default message [Debe especificarse el arrendatario]] [Field error in object 'alquilerInDto' on field 'arrendadorId': rejected value [null]; codes [NotNull.alquilerInDto.arrendadorId,NotNull.arrendadorId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [alquilerInDto.arrendadorId,arrendadorId]; arguments []; default message [arrendadorId]]; default message [Debe especificarse el arrendador]] 
2026-01-24 17:16:38,678 INFO c.n.r.c.AlquilerController [main] GET /alquileres - Parámetros: arrendadorId=5, arrendatarioId=null, productoId=null
2026-01-24 17:16:38,678 INFO c.n.r.c.AlquilerController [main] Resultado: 1 alquileres encontrados
2026-01-24 17:16:38,706 INFO c.n.r.c.AlquilerController [main] GET /alquileres - Parámetros: arrendadorId=null, arrendatarioId=null, productoId=null
2026-01-24 17:16:38,706 INFO c.n.r.c.AlquilerController [main] Resultado: 2 alquileres encontrados
2026-01-24 17:16:38,706 INFO c.n.r.c.AlquilerController [main] PUT /alquileres/1 - actualizando alquiler
2026-01-24 17:16:38,706 INFO c.n.r.c.AlquilerController [main] Alquiler con id 1 actualizado correctamente
2026-01-24 17:16:38,722 INFO c.n.r.c.AlquilerController [main] POST /alquileres - creando nuevo alquiler
2026-01-24 17:16:38,722 INFO c.n.r.c.AlquilerController [main] Alquiler creado con id 100
2026-01-24 17:16:38,984 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=null, arrendatarioId=null, productoId=5
2026-01-24 17:16:38,993 INFO c.n.r.s.AlquilerService [main] Servicio: buscando alquiler por ID 999
2026-01-24 17:16:38,993 ERROR c.n.r.s.AlquilerService [main] No existe alquiler con ID 999
2026-01-24 17:16:38,993 INFO c.n.r.s.AlquilerService [main] Agregando nuevo alquiler: productoId 1, arrendadorId 2, arrendatarioId 3
2026-01-24 17:16:38,993 WARN c.n.r.s.AlquilerService [main] Producto con ID 1 no encontrado
2026-01-24 17:16:38,993 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=1, arrendatarioId=null, productoId=10
2026-01-24 17:16:39,003 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=null, arrendatarioId=null, productoId=999
2026-01-24 17:16:39,003 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=null, arrendatarioId=null, productoId=null
2026-01-24 17:16:39,003 WARN c.n.r.s.AlquilerService [main] Servicio: Intentando eliminar alquiler con ID 999
2026-01-24 17:16:39,003 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=null, arrendatarioId=999, productoId=null
2026-01-24 17:16:39,020 WARN c.n.r.s.AlquilerService [main] Servicio: Intentando eliminar alquiler con ID 1
2026-01-24 17:16:39,020 INFO c.n.r.s.AlquilerService [main] Alquiler con ID 1 eliminado correctamente
2026-01-24 17:16:39,020 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=999, arrendatarioId=null, productoId=null
2026-01-24 17:16:39,020 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=2, arrendatarioId=null, productoId=null
2026-01-24 17:16:39,035 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=null, arrendatarioId=3, productoId=null
2026-01-24 17:16:39,035 INFO c.n.r.s.AlquilerService [main] Servicio: buscando alquiler por ID 1
2026-01-24 17:16:39,035 INFO c.n.r.s.AlquilerService [main] Agregando nuevo alquiler: productoId 1, arrendadorId 2, arrendatarioId 3
2026-01-24 17:16:39,035 INFO c.n.r.s.AlquilerService [main] Alquiler creado correctamente con ID 1
2026-01-24 17:16:39,035 INFO c.n.r.s.AlquilerService [main] Servicio: Modificando alquiler con ID 1
2026-01-24 17:16:39,035 INFO c.n.r.s.AlquilerService [main] Servicio: Alquiler actualizado correctamente con ID 1
2026-01-24 17:16:39,051 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [com.natalia.relab.CategoriaControllerTests]: CategoriaControllerTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-24 17:16:39,051 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration com.natalia.relab.RelabApplication for test class com.natalia.relab.CategoriaControllerTests
2026-01-24 17:16:39,084 INFO o.s.b.StartupInfoLogger [main] Starting CategoriaControllerTests using Java 21.0.8 with PID 628 (started by natal in D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab)
2026-01-24 17:16:39,085 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2026-01-24 17:16:39,281 INFO o.s.m.w.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2026-01-24 17:16:39,282 INFO o.s.w.s.FrameworkServlet [main] Initializing Servlet ''
2026-01-24 17:16:39,284 INFO o.s.w.s.FrameworkServlet [main] Completed initialization in 1 ms
2026-01-24 17:16:39,290 INFO o.s.b.StartupInfoLogger [main] Started CategoriaControllerTests in 0.224 seconds (process running for 3.775)
2026-01-24 17:16:39,295 INFO c.n.r.c.CategoriaController [main] GET /categorias/1 - Solicitando categoría por ID
2026-01-24 17:16:39,296 INFO c.n.r.c.CategoriaController [main] GET /categorias/1 - Categoría encontrada correctamente
2026-01-24 17:16:39,315 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.CategoriaOutDto> com.natalia.relab.controller.CategoriaController.agregarCategorias(com.natalia.relab.dto.CategoriaInDto) with 2 errors: [Field error in object 'categoriaInDto' on field 'descripcion': rejected value [abcd]; codes [Size.categoriaInDto.descripcion,Size.descripcion,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categoriaInDto.descripcion,descripcion]; arguments []; default message [descripcion],2147483647,10]; default message [La descripción debe tener al menos 10 caracteres]] [Field error in object 'categoriaInDto' on field 'nombre': rejected value []; codes [NotBlank.categoriaInDto.nombre,NotBlank.nombre,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categoriaInDto.nombre,nombre]; arguments []; default message [nombre]]; default message [El nombre es un campo obligatorio]] 
2026-01-24 17:16:39,315 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.CategoriaOutDto> com.natalia.relab.controller.CategoriaController.actualizarCategoria(com.natalia.relab.dto.CategoriaUpdateDto,long) throws exception.CategoriaNoEncontradaException with 2 errors: [Field error in object 'categoriaUpdateDto' on field 'descripcion': rejected value [Corta]; codes [Size.categoriaUpdateDto.descripcion,Size.descripcion,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categoriaUpdateDto.descripcion,descripcion]; arguments []; default message [descripcion],2147483647,10]; default message [La descripción debe tener al menos 10 caracteres]] [Field error in object 'categoriaUpdateDto' on field 'nombre': rejected value []; codes [Size.categoriaUpdateDto.nombre,Size.nombre,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categoriaUpdateDto.nombre,nombre]; arguments []; default message [nombre],2147483647,1]; default message [El nombre no puede estar vacío]] 
2026-01-24 17:16:39,331 WARN c.n.r.c.CategoriaController [main] DELETE /categorias/1 - Eliminación solicitada
2026-01-24 17:16:39,331 INFO c.n.r.c.CategoriaController [main] Categoría 1 eliminada correctamente
2026-01-24 17:16:39,331 INFO c.n.r.c.CategoriaController [main] PUT /categorias/1 - Actualización de categoría solicitada
2026-01-24 17:16:39,331 INFO c.n.r.c.CategoriaController [main] PUT /categorias/1 - Categoría actualizada correctamente
2026-01-24 17:16:39,347 WARN c.n.r.c.CategoriaController [main] DELETE /categorias/999 - Eliminación solicitada
2026-01-24 17:16:39,347 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CategoriaNoEncontradaException
2026-01-24 17:16:39,347 INFO c.n.r.c.CategoriaController [main] PUT /categorias/999 - Actualización de categoría solicitada
2026-01-24 17:16:39,347 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CategoriaNoEncontradaException
2026-01-24 17:16:39,347 INFO c.n.r.c.CategoriaController [main] POST /categorias - Creación de nueva categoría solicitada
2026-01-24 17:16:39,347 INFO c.n.r.c.CategoriaController [main] POST /categorias - Nueva categoría creada con ID 1
2026-01-24 17:16:39,363 INFO c.n.r.c.CategoriaController [main] GET /categorias/99 - Solicitando categoría por ID
2026-01-24 17:16:39,363 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CategoriaNoEncontradaException
2026-01-24 17:16:39,379 INFO c.n.r.c.CategoriaController [main] GET /categorías - filtros: nombre='Microscopios', activa=null, fechaCreacion=null, desde=null, hasta=null
2026-01-24 17:16:39,379 INFO c.n.r.c.CategoriaController [main] Se devolvieron 1 categorias
2026-01-24 17:16:39,379 INFO c.n.r.c.CategoriaController [main] GET /categorías - filtros: nombre='null', activa=null, fechaCreacion=null, desde=null, hasta=null
2026-01-24 17:16:39,379 INFO c.n.r.c.CategoriaController [main] Se devolvieron 2 categorias
2026-01-24 17:16:39,424 INFO c.n.r.s.CategoriaService [main] Buscando categoría por ID 99
2026-01-24 17:16:39,424 ERROR c.n.r.s.CategoriaService [main] Categoría 99 no encontrada
2026-01-24 17:16:39,424 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: null, fechaCreacion: null, desde: null, hasta: 2025-11-30
2026-01-24 17:16:39,440 INFO c.n.r.s.CategoriaService [main] Intentando crear nueva categoría
2026-01-24 17:16:39,440 INFO c.n.r.s.CategoriaService [main] Categoría creada con ID 1
2026-01-24 17:16:39,440 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: null, fechaCreacion: 2025-11-23, desde: null, hasta: null
2026-01-24 17:16:39,440 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: true, fechaCreacion: null, desde: null, hasta: null
2026-01-24 17:16:39,440 WARN c.n.r.s.CategoriaService [main] Intentando eliminar categoría 1
2026-01-24 17:16:39,456 INFO c.n.r.s.CategoriaService [main] Categoría 1 eliminada correctamente
2026-01-24 17:16:39,456 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: Centrífugas, activa: null, fechaCreacion: null, desde: null, hasta: null
2026-01-24 17:16:39,456 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: null, fechaCreacion: null, desde: 2025-11-01, hasta: 2025-11-30
2026-01-24 17:16:39,465 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: null, fechaCreacion: null, desde: null, hasta: null
2026-01-24 17:16:39,465 WARN c.n.r.s.CategoriaService [main] Intentando eliminar categoría 99
2026-01-24 17:16:39,465 ERROR c.n.r.s.CategoriaService [main] Categoría 99 no encontrada
2026-01-24 17:16:39,473 INFO c.n.r.s.CategoriaService [main] Intentando modificar categoría con ID 1
2026-01-24 17:16:39,473 INFO c.n.r.s.CategoriaService [main] Categoría 1 actualizada correctamente
2026-01-24 17:16:39,473 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: null, fechaCreacion: null, desde: 2025-11-01, hasta: null
2026-01-24 17:16:39,473 INFO c.n.r.s.CategoriaService [main] Buscando categoría por ID 1
2026-01-24 17:16:39,488 INFO c.n.r.s.CategoriaService [main] Intentando modificar categoría con ID 99
2026-01-24 17:16:39,488 ERROR c.n.r.s.CategoriaService [main] Categoría 99 no encontrada
2026-01-24 17:16:39,493 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [com.natalia.relab.CompraventaControllerTests]: CompraventaControllerTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-24 17:16:39,493 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration com.natalia.relab.RelabApplication for test class com.natalia.relab.CompraventaControllerTests
2026-01-24 17:16:39,504 INFO o.s.b.StartupInfoLogger [main] Starting CompraventaControllerTests using Java 21.0.8 with PID 628 (started by natal in D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab)
2026-01-24 17:16:39,504 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2026-01-24 17:16:39,660 INFO o.s.m.w.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2026-01-24 17:16:39,660 INFO o.s.w.s.FrameworkServlet [main] Initializing Servlet ''
2026-01-24 17:16:39,660 INFO o.s.w.s.FrameworkServlet [main] Completed initialization in 0 ms
2026-01-24 17:16:39,660 INFO o.s.b.StartupInfoLogger [main] Started CompraventaControllerTests in 0.167 seconds (process running for 4.156)
2026-01-24 17:16:39,676 INFO c.n.r.c.CompraventaController [main] POST /compraventas - creando compraventa para productoId 1 entre compradorId 2 y vendedorId 3
2026-01-24 17:16:39,676 INFO c.n.r.c.CompraventaController [main] Compraventa creada con id 1
2026-01-24 17:16:39,676 INFO c.n.r.c.CompraventaController [main] POST /compraventas - creando compraventa para productoId 99 entre compradorId 1 y vendedorId 2
2026-01-24 17:16:39,676 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: ProductoNoEncontradoException
2026-01-24 17:16:39,693 INFO c.n.r.c.CompraventaController [main] GET /compraventas - Filtros recibidos -> compradorId=null, vendedorId=null, productoId=null
2026-01-24 17:16:39,693 INFO c.n.r.c.CompraventaController [main] Resultado: 1 compraventas encontradas
2026-01-24 17:16:39,693 WARN c.n.r.c.CompraventaController [main] DELETE /compraventas/1 solicitado
2026-01-24 17:16:39,693 INFO c.n.r.c.CompraventaController [main] Compraventa con id 1 eliminada correctamente
2026-01-24 17:16:39,693 WARN c.n.r.c.CompraventaController [main] DELETE /compraventas/99 solicitado
2026-01-24 17:16:39,708 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CompraventaNoEncontradaException
2026-01-24 17:16:39,708 INFO c.n.r.c.CompraventaController [main] PUT /compraventas/1 actualizando
2026-01-24 17:16:39,708 INFO c.n.r.c.CompraventaController [main] Compraventa con id 1 actualizada correctamente
2026-01-24 17:16:39,708 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.CompraventaOutDto> com.natalia.relab.controller.CompraventaController.actualizarCompraventa(com.natalia.relab.dto.CompraventaUpdateDto,long) throws exception.CompraventaNoEncontradaException: [Field error in object 'compraventaUpdateDto' on field 'precioFinal': rejected value [-5.0]; codes [Min.compraventaUpdateDto.precioFinal,Min.precioFinal,Min.java.lang.Float,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [compraventaUpdateDto.precioFinal,precioFinal]; arguments []; default message [precioFinal],0]; default message [El precio debe ser mayor que cero]] 
2026-01-24 17:16:39,724 INFO c.n.r.c.CompraventaController [main] POST /compraventas - creando compraventa para productoId 1 entre compradorId 2 y vendedorId 3
2026-01-24 17:16:39,724 WARN c.n.r.c.GlobalExceptionHandler [main] Conflicto: producto ya vendido
2026-01-24 17:16:39,724 INFO c.n.r.c.CompraventaController [main] GET /compraventas/1 solicitado
2026-01-24 17:16:39,724 INFO c.n.r.c.CompraventaController [main] Compraventa con id 1 encontrada
2026-01-24 17:16:39,724 INFO c.n.r.c.CompraventaController [main] GET /compraventas/99 solicitado
2026-01-24 17:16:39,724 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CompraventaNoEncontradaException
2026-01-24 17:16:39,724 INFO c.n.r.c.CompraventaController [main] GET /compraventas - Filtros recibidos -> compradorId=99, vendedorId=null, productoId=null
2026-01-24 17:16:39,741 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:16:39,747 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.CompraventaOutDto> com.natalia.relab.controller.CompraventaController.agregarCompraventa(com.natalia.relab.dto.CompraventaInDto) throws exception.UsuarioNoEncontradoException,exception.ProductoNoEncontradoException,exception.ProductoYaVendidoException: [Field error in object 'compraventaInDto' on field 'productoId': rejected value [null]; codes [NotNull.compraventaInDto.productoId,NotNull.productoId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [compraventaInDto.productoId,productoId]; arguments []; default message [productoId]]; default message [Debe especificarse el producto comprado/vendido]] 
2026-01-24 17:16:39,784 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=null, productoId=5
2026-01-24 17:16:39,784 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=10, vendedorId=null, productoId=null
2026-01-24 17:16:39,784 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=20, productoId=null
2026-01-24 17:16:39,793 WARN c.n.r.s.CompraventaService [main] Servicio: Eliminar compraventa 999
2026-01-24 17:16:39,793 ERROR c.n.r.s.CompraventaService [main] Compraventa 999 no encontrada para eliminar
2026-01-24 17:16:39,800 WARN c.n.r.s.CompraventaService [main] Servicio: Eliminar compraventa 1
2026-01-24 17:16:39,800 INFO c.n.r.s.CompraventaService [main] Compraventa 1 eliminada correctamente
2026-01-24 17:16:39,800 INFO c.n.r.s.CompraventaService [main] Agregando compraventa de producto id 1 entre comprador id 2 y vendedor id 3
2026-01-24 17:16:39,800 WARN c.n.r.s.CompraventaService [main] Producto 1 ya ha sido vendido. Operación cancelada
2026-01-24 17:16:39,800 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=null, productoId=null
2026-01-24 17:16:39,800 INFO c.n.r.s.CompraventaService [main] Servicio: Modificar compraventa por ID 1
2026-01-24 17:16:39,800 INFO c.n.r.s.CompraventaService [main] Compraventa 1 actualizada correctamente
2026-01-24 17:16:39,816 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=null, productoId=5
2026-01-24 17:16:39,816 INFO c.n.r.s.CompraventaService [main] Servicio: Buscar compraventa por ID 999
2026-01-24 17:16:39,816 ERROR c.n.r.s.CompraventaService [main] Compraventa no encontrada con ID 999
2026-01-24 17:16:39,816 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=null, productoId=99
2026-01-24 17:16:39,816 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=999, productoId=null
2026-01-24 17:16:39,833 INFO c.n.r.s.CompraventaService [main] Servicio: Buscar compraventa por ID 1
2026-01-24 17:16:39,842 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=999, vendedorId=null, productoId=null
2026-01-24 17:16:39,845 INFO c.n.r.s.CompraventaService [main] Agregando compraventa de producto id 1 entre comprador id 2 y vendedor id 3
2026-01-24 17:16:39,846 INFO c.n.r.s.CompraventaService [main] Compraventa creada correctamente. ID=1
2026-01-24 17:16:39,853 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [com.natalia.relab.ProductoControllerTests]: ProductoControllerTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-24 17:16:39,860 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration com.natalia.relab.RelabApplication for test class com.natalia.relab.ProductoControllerTests
2026-01-24 17:16:39,862 INFO o.s.b.StartupInfoLogger [main] Starting ProductoControllerTests using Java 21.0.8 with PID 628 (started by natal in D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab)
2026-01-24 17:16:39,862 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2026-01-24 17:16:40,002 INFO o.s.m.w.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2026-01-24 17:16:40,002 INFO o.s.w.s.FrameworkServlet [main] Initializing Servlet ''
2026-01-24 17:16:40,018 INFO o.s.w.s.FrameworkServlet [main] Completed initialization in 16 ms
2026-01-24 17:16:40,018 INFO o.s.b.StartupInfoLogger [main] Started ProductoControllerTests in 0.156 seconds (process running for 4.506)
2026-01-24 17:16:40,034 INFO c.n.r.c.ProductoController [main] POST /productos - creando nuevo producto. Nombre=Producto Test, UsuarioId=1, CategoriaId=999
2026-01-24 17:16:40,050 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CategoriaNoEncontradaException
2026-01-24 17:16:40,060 INFO c.n.r.c.ProductoController [main] PUT /productos/999 - actualización solicitada
2026-01-24 17:16:40,061 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: ProductoNoEncontradoException
2026-01-24 17:16:40,065 INFO c.n.r.c.ProductoController [main] GET /productos/999 - solicitando producto por ID
2026-01-24 17:16:40,067 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: ProductoNoEncontradoException
2026-01-24 17:16:40,072 INFO c.n.r.c.ProductoController [main] POST /productos - creando nuevo producto. Nombre=Producto Test, UsuarioId=999, CategoriaId=null
2026-01-24 17:16:40,073 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:16:40,079 INFO c.n.r.c.ProductoController [main] GET /productos - filtros: nombre=Producto Test, activo=null, categoriaId=null, usuarioId=null
2026-01-24 17:16:40,080 INFO c.n.r.c.ProductoController [main] GET /productos - encontrados 1 productos
2026-01-24 17:16:40,080 WARN c.n.r.c.ProductoController [main] DELETE /productos/999 - eliminación solicitada
2026-01-24 17:16:40,080 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: ProductoNoEncontradoException
2026-01-24 17:16:40,080 INFO c.n.r.c.ProductoController [main] GET /productos/1 - solicitando producto por ID
2026-01-24 17:16:40,094 INFO c.n.r.c.ProductoController [main] GET /productos/1 - producto encontrado correctamente
2026-01-24 17:16:40,094 WARN c.n.r.c.ProductoController [main] DELETE /productos/1 - eliminación solicitada
2026-01-24 17:16:40,094 WARN c.n.r.c.ProductoController [main] DELETE /productos/1 - producto eliminado
2026-01-24 17:16:40,094 INFO c.n.r.c.ProductoController [main] PUT /productos/1 - actualización solicitada
2026-01-24 17:16:40,094 INFO c.n.r.c.ProductoController [main] PUT /productos/1 - producto actualizado correctamente
2026-01-24 17:16:40,094 INFO c.n.r.c.ProductoController [main] GET /productos - filtros: nombre=null, activo=null, categoriaId=999, usuarioId=null
2026-01-24 17:16:40,110 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CategoriaNoEncontradaException
2026-01-24 17:16:40,110 INFO c.n.r.c.ProductoController [main] POST /productos - creando nuevo producto. Nombre=Producto Test, UsuarioId=1, CategoriaId=2
2026-01-24 17:16:40,110 INFO c.n.r.c.ProductoController [main] POST /productos - producto creado con ID 10
2026-01-24 17:16:40,121 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.ProductoOutDto> com.natalia.relab.controller.ProductoController.actualizarProducto(com.natalia.relab.dto.ProductoUpdateDto,long) throws exception.ProductoNoEncontradoException,exception.CategoriaNoEncontradaException: [Field error in object 'productoUpdateDto' on field 'nombre': rejected value []; codes [Size.productoUpdateDto.nombre,Size.nombre,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [productoUpdateDto.nombre,nombre]; arguments []; default message [nombre],2147483647,1]; default message [El nombre no puede estar vacío]] 
2026-01-24 17:16:40,125 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.ProductoOutDto> com.natalia.relab.controller.ProductoController.agregarProducto(com.natalia.relab.dto.ProductoInDto) throws exception.CategoriaNoEncontradaException,exception.UsuarioNoEncontradoException: [Field error in object 'productoInDto' on field 'nombre': rejected value [null]; codes [NotBlank.productoInDto.nombre,NotBlank.nombre,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [productoInDto.nombre,nombre]; arguments []; default message [nombre]]; default message [El nombre del producto es un campo obligatorio]] 
2026-01-24 17:16:40,126 WARN c.n.r.s.ProductoService [main] Producto 999 no encontrado
2026-01-24 17:16:40,126 WARN c.n.r.s.ProductoService [main] Servicio: eliminando producto 5
2026-01-24 17:16:40,142 WARN c.n.r.s.ProductoService [main] Producto 5 eliminado correctamente
2026-01-24 17:16:40,143 INFO c.n.r.s.ProductoService [main] Servicio: creando producto 'Producto1'
2026-01-24 17:16:40,143 WARN c.n.r.s.ProductoService [main] Usuario 99 no encontrado
2026-01-24 17:16:40,143 WARN c.n.r.s.ProductoService [main] Servicio: eliminando producto 999
2026-01-24 17:16:40,143 WARN c.n.r.s.ProductoService [main] Producto 999 no encontrado al intentar eliminar
2026-01-24 17:16:40,159 INFO c.n.r.s.ProductoService [main] Servicio: actualizando producto 1
2026-01-24 17:16:40,159 INFO c.n.r.s.ProductoService [main] Producto 1 actualizado correctamente
2026-01-24 17:16:40,159 INFO c.n.r.s.ProductoService [main] Servicio: actualizando producto 999
2026-01-24 17:16:40,159 WARN c.n.r.s.ProductoService [main] Producto 999 no encontrado al intentar actualizar
2026-01-24 17:16:40,174 INFO c.n.r.s.ProductoService [main] Servicio: creando producto 'Producto1'
2026-01-24 17:16:40,174 INFO c.n.r.s.ProductoService [main] Producto creado con ID 100
2026-01-24 17:16:40,174 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [com.natalia.relab.UsuarioControllerTests]: UsuarioControllerTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-24 17:16:40,194 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration com.natalia.relab.RelabApplication for test class com.natalia.relab.UsuarioControllerTests
2026-01-24 17:16:40,206 INFO o.s.b.StartupInfoLogger [main] Starting UsuarioControllerTests using Java 21.0.8 with PID 628 (started by natal in D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab)
2026-01-24 17:16:40,206 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2026-01-24 17:16:40,347 INFO o.s.m.w.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2026-01-24 17:16:40,347 INFO o.s.w.s.FrameworkServlet [main] Initializing Servlet ''
2026-01-24 17:16:40,347 INFO o.s.w.s.FrameworkServlet [main] Completed initialization in 0 ms
2026-01-24 17:16:40,363 INFO o.s.b.StartupInfoLogger [main] Started UsuarioControllerTests in 0.169 seconds (process running for 4.851)
2026-01-24 17:16:40,363 INFO c.n.r.c.UsuarioController [main] GET /usuarios - filtros: nickname=user1, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:16:40,363 INFO c.n.r.c.UsuarioController [main] Resultado: 1 usuarios encontrados
2026-01-24 17:16:40,379 INFO c.n.r.c.UsuarioController [main] GET /usuarios/99 solicitado
2026-01-24 17:16:40,379 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:16:40,409 INFO c.n.r.c.UsuarioController [main] POST /usuarios - creando usuario con nickname natalia
2026-01-24 17:16:40,409 INFO c.n.r.c.UsuarioController [main] Usuario creado con id 1
2026-01-24 17:16:40,409 INFO c.n.r.c.UsuarioController [main] PUT /usuarios/5 - actualización solicitada
2026-01-24 17:16:40,409 INFO c.n.r.c.UsuarioController [main] Usuario 5 actualizado correctamente
2026-01-24 17:16:40,409 INFO c.n.r.c.UsuarioController [main] GET /usuarios - filtros: nickname=inexistente, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:16:40,424 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:16:40,424 INFO c.n.r.c.UsuarioController [main] GET /usuarios - filtros: nickname=null, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:16:40,424 INFO c.n.r.c.UsuarioController [main] Resultado: 2 usuarios encontrados
2026-01-24 17:16:40,424 INFO c.n.r.c.UsuarioController [main] PUT /usuarios/5 - actualización solicitada
2026-01-24 17:16:40,424 WARN c.n.r.c.GlobalExceptionHandler [main] Intento de creación con datos duplicados: NicknameYaExisteException
2026-01-24 17:16:40,424 INFO c.n.r.c.UsuarioController [main] PUT /usuarios/999 - actualización solicitada
2026-01-24 17:16:40,424 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:16:40,440 INFO c.n.r.c.UsuarioController [main] GET /usuarios/1 solicitado
2026-01-24 17:16:40,440 INFO c.n.r.c.UsuarioController [main] Usuario con id 1 encontrado
2026-01-24 17:16:40,440 WARN c.n.r.c.UsuarioController [main] DELETE /usuarios/5 solicitado
2026-01-24 17:16:40,440 INFO c.n.r.c.UsuarioController [main] Usuario 5 eliminado correctamente
2026-01-24 17:16:40,440 WARN c.n.r.c.UsuarioController [main] DELETE /usuarios/999 solicitado
2026-01-24 17:16:40,452 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:16:40,456 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.UsuarioOutDto> com.natalia.relab.controller.UsuarioController.agregarUsuario(com.natalia.relab.dto.UsuarioInDto) with 3 errors: [Field error in object 'usuarioInDto' on field 'email': rejected value [email-mal]; codes [Email.usuarioInDto.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [usuarioInDto.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@2b33e616,.*]; default message [El formato de email no es válido]] [Field error in object 'usuarioInDto' on field 'password': rejected value [123]; codes [Size.usuarioInDto.password,Size.password,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [usuarioInDto.password,password]; arguments []; default message [password],2147483647,4]; default message [La contraseña debe tener al menos 4 carácteres]] [Field error in object 'usuarioInDto' on field 'nickname': rejected value []; codes [NotBlank.usuarioInDto.nickname,NotBlank.nickname,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [usuarioInDto.nickname,nickname]; arguments []; default message [nickname]]; default message [El nickname es un campo obligatorio]] 
2026-01-24 17:16:40,456 INFO c.n.r.s.UsuarioService [main] Buscando usuario por id 999
2026-01-24 17:16:40,456 ERROR c.n.r.s.UsuarioService [main] Usuario con id 999 no encontrado
2026-01-24 17:16:40,456 INFO c.n.r.s.UsuarioService [main] Modificando usuario con id 999
2026-01-24 17:16:40,456 ERROR c.n.r.s.UsuarioService [main] Usuario 999 no encontrado para modificar
2026-01-24 17:16:40,456 INFO c.n.r.s.UsuarioService [main] Agregando usuario con nickname usuarioExistente
2026-01-24 17:16:40,456 ERROR c.n.r.s.UsuarioService [main] Error: nickname usuarioExistente ya existe
2026-01-24 17:16:40,472 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=null, tipoUsuario=empresa, cuentaActiva=null
2026-01-24 17:16:40,472 INFO c.n.r.s.UsuarioService [main] Agregando usuario con nickname usuario1
2026-01-24 17:16:40,472 INFO c.n.r.s.UsuarioService [main] Usuario creado con id 42
2026-01-24 17:16:40,472 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=null, tipoUsuario=null, cuentaActiva=true
2026-01-24 17:16:40,472 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=null, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:16:40,472 INFO c.n.r.s.UsuarioService [main] Modificando usuario con id 5
2026-01-24 17:16:40,472 INFO c.n.r.s.UsuarioService [main] Usuario 5 modificado correctamente
2026-01-24 17:16:40,488 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=usuarioInexistente, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:16:40,491 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=usuario1, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:16:40,494 WARN c.n.r.s.UsuarioService [main] Eliminando usuario con id 999
2026-01-24 17:16:40,495 ERROR c.n.r.s.UsuarioService [main] No se puede eliminar, el usuario 999 no existe
2026-01-24 17:16:40,497 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=usuario1, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:16:40,500 INFO c.n.r.s.UsuarioService [main] Buscando usuario por id 10
2026-01-24 17:16:40,502 WARN c.n.r.s.UsuarioService [main] Eliminando usuario con id 10
2026-01-24 17:16:40,503 INFO c.n.r.s.UsuarioService [main] Usuario 10 eliminado
2026-01-24 17:18:55,185 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.3.Final
2026-01-24 17:18:55,216 INFO o.s.b.StartupInfoLogger [main] Starting AlquilerControllerTests using Java 21.0.8 with PID 28248 (started by natal in D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab)
2026-01-24 17:18:55,216 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2026-01-24 17:18:57,018 INFO o.s.m.w.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2026-01-24 17:18:57,018 INFO o.s.w.s.FrameworkServlet [main] Initializing Servlet ''
2026-01-24 17:18:57,018 INFO o.s.w.s.FrameworkServlet [main] Completed initialization in 0 ms
2026-01-24 17:18:57,065 INFO o.s.b.StartupInfoLogger [main] Started AlquilerControllerTests in 2.139 seconds (process running for 2.843)
2026-01-24 17:18:57,222 WARN c.n.r.c.AlquilerController [main] DELETE /alquileres/99 - eliminando
2026-01-24 17:18:57,228 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: AlquilerNoEncontradoException
2026-01-24 17:18:57,375 INFO c.n.r.c.AlquilerController [main] POST /alquileres - creando nuevo alquiler
2026-01-24 17:18:57,375 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: ProductoNoEncontradoException
2026-01-24 17:18:57,379 INFO c.n.r.c.AlquilerController [main] GET /alquileres - Parámetros: arrendadorId=99, arrendatarioId=null, productoId=null
2026-01-24 17:18:57,379 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:18:57,394 INFO c.n.r.c.AlquilerController [main] PUT /alquileres/99 - actualizando alquiler
2026-01-24 17:18:57,394 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: AlquilerNoEncontradoException
2026-01-24 17:18:57,410 WARN c.n.r.c.AlquilerController [main] DELETE /alquileres/1 - eliminando
2026-01-24 17:18:57,410 INFO c.n.r.c.AlquilerController [main] Alquiler con id 1 eliminado correctamente
2026-01-24 17:18:57,441 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.AlquilerOutDto> com.natalia.relab.controller.AlquilerController.actualizarAlquiler(com.natalia.relab.dto.AlquilerUpdateDto,long) throws exception.AlquilerNoEncontradoException: [Field error in object 'alquilerUpdateDto' on field 'precio': rejected value [-10.0]; codes [Min.alquilerUpdateDto.precio,Min.precio,Min.java.lang.Float,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [alquilerUpdateDto.precio,precio]; arguments []; default message [precio],0]; default message [El precio debe ser mayor que cero]] 
2026-01-24 17:18:57,462 INFO c.n.r.c.AlquilerController [main] GET /alquileres/1 solicitado
2026-01-24 17:18:57,462 INFO c.n.r.c.AlquilerController [main] Alquiler con id 1 encontrado
2026-01-24 17:18:57,478 INFO c.n.r.c.AlquilerController [main] GET /alquileres/99 solicitado
2026-01-24 17:18:57,494 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: AlquilerNoEncontradoException
2026-01-24 17:18:57,494 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.AlquilerOutDto> com.natalia.relab.controller.AlquilerController.agregarAlquiler(com.natalia.relab.dto.AlquilerInDto) throws exception.UsuarioNoEncontradoException,exception.ProductoNoEncontradoException with 4 errors: [Field error in object 'alquilerInDto' on field 'productoId': rejected value [null]; codes [NotNull.alquilerInDto.productoId,NotNull.productoId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [alquilerInDto.productoId,productoId]; arguments []; default message [productoId]]; default message [Debe especificarse el producto alquilado]] [Field error in object 'alquilerInDto' on field 'precio': rejected value [-10.0]; codes [Min.alquilerInDto.precio,Min.precio,Min.float,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [alquilerInDto.precio,precio]; arguments []; default message [precio],0]; default message [El precio debe ser mayor que cero]] [Field error in object 'alquilerInDto' on field 'arrendatarioId': rejected value [null]; codes [NotNull.alquilerInDto.arrendatarioId,NotNull.arrendatarioId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [alquilerInDto.arrendatarioId,arrendatarioId]; arguments []; default message [arrendatarioId]]; default message [Debe especificarse el arrendatario]] [Field error in object 'alquilerInDto' on field 'arrendadorId': rejected value [null]; codes [NotNull.alquilerInDto.arrendadorId,NotNull.arrendadorId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [alquilerInDto.arrendadorId,arrendadorId]; arguments []; default message [arrendadorId]]; default message [Debe especificarse el arrendador]] 
2026-01-24 17:18:57,494 INFO c.n.r.c.AlquilerController [main] GET /alquileres - Parámetros: arrendadorId=5, arrendatarioId=null, productoId=null
2026-01-24 17:18:57,494 INFO c.n.r.c.AlquilerController [main] Resultado: 1 alquileres encontrados
2026-01-24 17:18:57,525 INFO c.n.r.c.AlquilerController [main] GET /alquileres - Parámetros: arrendadorId=null, arrendatarioId=null, productoId=null
2026-01-24 17:18:57,525 INFO c.n.r.c.AlquilerController [main] Resultado: 2 alquileres encontrados
2026-01-24 17:18:57,525 INFO c.n.r.c.AlquilerController [main] PUT /alquileres/1 - actualizando alquiler
2026-01-24 17:18:57,525 INFO c.n.r.c.AlquilerController [main] Alquiler con id 1 actualizado correctamente
2026-01-24 17:18:57,525 INFO c.n.r.c.AlquilerController [main] POST /alquileres - creando nuevo alquiler
2026-01-24 17:18:57,525 INFO c.n.r.c.AlquilerController [main] Alquiler creado con id 100
2026-01-24 17:18:57,800 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=null, arrendatarioId=null, productoId=5
2026-01-24 17:18:57,800 INFO c.n.r.s.AlquilerService [main] Servicio: buscando alquiler por ID 999
2026-01-24 17:18:57,800 ERROR c.n.r.s.AlquilerService [main] No existe alquiler con ID 999
2026-01-24 17:18:57,816 INFO c.n.r.s.AlquilerService [main] Agregando nuevo alquiler: productoId 1, arrendadorId 2, arrendatarioId 3
2026-01-24 17:18:57,816 WARN c.n.r.s.AlquilerService [main] Producto con ID 1 no encontrado
2026-01-24 17:18:57,819 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=1, arrendatarioId=2, productoId=10
2026-01-24 17:18:57,819 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=null, arrendatarioId=null, productoId=999
2026-01-24 17:18:57,819 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=null, arrendatarioId=null, productoId=null
2026-01-24 17:18:57,832 WARN c.n.r.s.AlquilerService [main] Servicio: Intentando eliminar alquiler con ID 999
2026-01-24 17:18:57,832 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=null, arrendatarioId=999, productoId=null
2026-01-24 17:18:57,832 WARN c.n.r.s.AlquilerService [main] Servicio: Intentando eliminar alquiler con ID 1
2026-01-24 17:18:57,832 INFO c.n.r.s.AlquilerService [main] Alquiler con ID 1 eliminado correctamente
2026-01-24 17:18:57,848 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=999, arrendatarioId=null, productoId=null
2026-01-24 17:18:57,848 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=2, arrendatarioId=null, productoId=null
2026-01-24 17:18:57,848 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=null, arrendatarioId=3, productoId=null
2026-01-24 17:18:57,848 INFO c.n.r.s.AlquilerService [main] Servicio: buscando alquiler por ID 1
2026-01-24 17:18:57,848 INFO c.n.r.s.AlquilerService [main] Agregando nuevo alquiler: productoId 1, arrendadorId 2, arrendatarioId 3
2026-01-24 17:18:57,863 INFO c.n.r.s.AlquilerService [main] Alquiler creado correctamente con ID 1
2026-01-24 17:18:57,866 INFO c.n.r.s.AlquilerService [main] Servicio: Modificando alquiler con ID 1
2026-01-24 17:18:57,866 INFO c.n.r.s.AlquilerService [main] Servicio: Alquiler actualizado correctamente con ID 1
2026-01-24 17:18:57,871 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [com.natalia.relab.CategoriaControllerTests]: CategoriaControllerTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-24 17:18:57,884 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration com.natalia.relab.RelabApplication for test class com.natalia.relab.CategoriaControllerTests
2026-01-24 17:18:57,893 INFO o.s.b.StartupInfoLogger [main] Starting CategoriaControllerTests using Java 21.0.8 with PID 28248 (started by natal in D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab)
2026-01-24 17:18:57,893 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2026-01-24 17:18:58,118 INFO o.s.m.w.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2026-01-24 17:18:58,119 INFO o.s.w.s.FrameworkServlet [main] Initializing Servlet ''
2026-01-24 17:18:58,120 INFO o.s.w.s.FrameworkServlet [main] Completed initialization in 1 ms
2026-01-24 17:18:58,124 INFO o.s.b.StartupInfoLogger [main] Started CategoriaControllerTests in 0.238 seconds (process running for 3.899)
2026-01-24 17:18:58,129 INFO c.n.r.c.CategoriaController [main] GET /categorias/1 - Solicitando categoría por ID
2026-01-24 17:18:58,130 INFO c.n.r.c.CategoriaController [main] GET /categorias/1 - Categoría encontrada correctamente
2026-01-24 17:18:58,143 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.CategoriaOutDto> com.natalia.relab.controller.CategoriaController.agregarCategorias(com.natalia.relab.dto.CategoriaInDto) with 2 errors: [Field error in object 'categoriaInDto' on field 'descripcion': rejected value [abcd]; codes [Size.categoriaInDto.descripcion,Size.descripcion,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categoriaInDto.descripcion,descripcion]; arguments []; default message [descripcion],2147483647,10]; default message [La descripción debe tener al menos 10 caracteres]] [Field error in object 'categoriaInDto' on field 'nombre': rejected value []; codes [NotBlank.categoriaInDto.nombre,NotBlank.nombre,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categoriaInDto.nombre,nombre]; arguments []; default message [nombre]]; default message [El nombre es un campo obligatorio]] 
2026-01-24 17:18:58,167 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.CategoriaOutDto> com.natalia.relab.controller.CategoriaController.actualizarCategoria(com.natalia.relab.dto.CategoriaUpdateDto,long) throws exception.CategoriaNoEncontradaException with 2 errors: [Field error in object 'categoriaUpdateDto' on field 'nombre': rejected value []; codes [Size.categoriaUpdateDto.nombre,Size.nombre,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categoriaUpdateDto.nombre,nombre]; arguments []; default message [nombre],2147483647,1]; default message [El nombre no puede estar vacío]] [Field error in object 'categoriaUpdateDto' on field 'descripcion': rejected value [Corta]; codes [Size.categoriaUpdateDto.descripcion,Size.descripcion,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categoriaUpdateDto.descripcion,descripcion]; arguments []; default message [descripcion],2147483647,10]; default message [La descripción debe tener al menos 10 caracteres]] 
2026-01-24 17:18:58,167 WARN c.n.r.c.CategoriaController [main] DELETE /categorias/1 - Eliminación solicitada
2026-01-24 17:18:58,175 INFO c.n.r.c.CategoriaController [main] Categoría 1 eliminada correctamente
2026-01-24 17:18:58,175 INFO c.n.r.c.CategoriaController [main] PUT /categorias/1 - Actualización de categoría solicitada
2026-01-24 17:18:58,175 INFO c.n.r.c.CategoriaController [main] PUT /categorias/1 - Categoría actualizada correctamente
2026-01-24 17:18:58,175 WARN c.n.r.c.CategoriaController [main] DELETE /categorias/999 - Eliminación solicitada
2026-01-24 17:18:58,175 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CategoriaNoEncontradaException
2026-01-24 17:18:58,192 INFO c.n.r.c.CategoriaController [main] PUT /categorias/999 - Actualización de categoría solicitada
2026-01-24 17:18:58,194 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CategoriaNoEncontradaException
2026-01-24 17:18:58,198 INFO c.n.r.c.CategoriaController [main] POST /categorias - Creación de nueva categoría solicitada
2026-01-24 17:18:58,199 INFO c.n.r.c.CategoriaController [main] POST /categorias - Nueva categoría creada con ID 1
2026-01-24 17:18:58,203 INFO c.n.r.c.CategoriaController [main] GET /categorias/99 - Solicitando categoría por ID
2026-01-24 17:18:58,204 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CategoriaNoEncontradaException
2026-01-24 17:18:58,222 INFO c.n.r.c.CategoriaController [main] GET /categorías - filtros: nombre='Microscopios', activa=null, fechaCreacion=null, desde=null, hasta=null
2026-01-24 17:18:58,222 INFO c.n.r.c.CategoriaController [main] Se devolvieron 1 categorias
2026-01-24 17:18:58,222 INFO c.n.r.c.CategoriaController [main] GET /categorías - filtros: nombre='null', activa=null, fechaCreacion=null, desde=null, hasta=null
2026-01-24 17:18:58,222 INFO c.n.r.c.CategoriaController [main] Se devolvieron 2 categorias
2026-01-24 17:18:58,269 INFO c.n.r.s.CategoriaService [main] Buscando categoría por ID 99
2026-01-24 17:18:58,269 ERROR c.n.r.s.CategoriaService [main] Categoría 99 no encontrada
2026-01-24 17:18:58,269 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: null, fechaCreacion: null, desde: null, hasta: 2025-11-30
2026-01-24 17:18:58,278 INFO c.n.r.s.CategoriaService [main] Intentando crear nueva categoría
2026-01-24 17:18:58,278 INFO c.n.r.s.CategoriaService [main] Categoría creada con ID 1
2026-01-24 17:18:58,280 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: null, fechaCreacion: 2025-11-23, desde: null, hasta: null
2026-01-24 17:18:58,284 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: true, fechaCreacion: null, desde: null, hasta: null
2026-01-24 17:18:58,289 WARN c.n.r.s.CategoriaService [main] Intentando eliminar categoría 1
2026-01-24 17:18:58,289 INFO c.n.r.s.CategoriaService [main] Categoría 1 eliminada correctamente
2026-01-24 17:18:58,289 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: Centrífugas, activa: null, fechaCreacion: null, desde: null, hasta: null
2026-01-24 17:18:58,289 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: null, fechaCreacion: null, desde: 2025-11-01, hasta: 2025-11-30
2026-01-24 17:18:58,289 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: null, fechaCreacion: null, desde: null, hasta: null
2026-01-24 17:18:58,302 WARN c.n.r.s.CategoriaService [main] Intentando eliminar categoría 99
2026-01-24 17:18:58,302 ERROR c.n.r.s.CategoriaService [main] Categoría 99 no encontrada
2026-01-24 17:18:58,302 INFO c.n.r.s.CategoriaService [main] Intentando modificar categoría con ID 1
2026-01-24 17:18:58,302 INFO c.n.r.s.CategoriaService [main] Categoría 1 actualizada correctamente
2026-01-24 17:18:58,302 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: null, fechaCreacion: null, desde: 2025-11-01, hasta: null
2026-01-24 17:18:58,302 INFO c.n.r.s.CategoriaService [main] Buscando categoría por ID 1
2026-01-24 17:18:58,317 INFO c.n.r.s.CategoriaService [main] Intentando modificar categoría con ID 99
2026-01-24 17:18:58,318 ERROR c.n.r.s.CategoriaService [main] Categoría 99 no encontrada
2026-01-24 17:18:58,323 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [com.natalia.relab.CompraventaControllerTests]: CompraventaControllerTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-24 17:18:58,327 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration com.natalia.relab.RelabApplication for test class com.natalia.relab.CompraventaControllerTests
2026-01-24 17:18:58,331 INFO o.s.b.StartupInfoLogger [main] Starting CompraventaControllerTests using Java 21.0.8 with PID 28248 (started by natal in D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab)
2026-01-24 17:18:58,331 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2026-01-24 17:18:58,504 INFO o.s.m.w.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2026-01-24 17:18:58,504 INFO o.s.w.s.FrameworkServlet [main] Initializing Servlet ''
2026-01-24 17:18:58,504 INFO o.s.w.s.FrameworkServlet [main] Completed initialization in 0 ms
2026-01-24 17:18:58,504 INFO o.s.b.StartupInfoLogger [main] Started CompraventaControllerTests in 0.175 seconds (process running for 4.294)
2026-01-24 17:18:58,519 INFO c.n.r.c.CompraventaController [main] POST /compraventas - creando compraventa para productoId 1 entre compradorId 2 y vendedorId 3
2026-01-24 17:18:58,519 INFO c.n.r.c.CompraventaController [main] Compraventa creada con id 1
2026-01-24 17:18:58,539 INFO c.n.r.c.CompraventaController [main] POST /compraventas - creando compraventa para productoId 99 entre compradorId 1 y vendedorId 2
2026-01-24 17:18:58,540 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: ProductoNoEncontradoException
2026-01-24 17:18:58,546 INFO c.n.r.c.CompraventaController [main] GET /compraventas - Filtros recibidos -> compradorId=null, vendedorId=null, productoId=null
2026-01-24 17:18:58,547 INFO c.n.r.c.CompraventaController [main] Resultado: 1 compraventas encontradas
2026-01-24 17:18:58,550 WARN c.n.r.c.CompraventaController [main] DELETE /compraventas/1 solicitado
2026-01-24 17:18:58,550 INFO c.n.r.c.CompraventaController [main] Compraventa con id 1 eliminada correctamente
2026-01-24 17:18:58,550 WARN c.n.r.c.CompraventaController [main] DELETE /compraventas/99 solicitado
2026-01-24 17:18:58,550 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CompraventaNoEncontradaException
2026-01-24 17:18:58,566 INFO c.n.r.c.CompraventaController [main] PUT /compraventas/1 actualizando
2026-01-24 17:18:58,566 INFO c.n.r.c.CompraventaController [main] Compraventa con id 1 actualizada correctamente
2026-01-24 17:18:58,566 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.CompraventaOutDto> com.natalia.relab.controller.CompraventaController.actualizarCompraventa(com.natalia.relab.dto.CompraventaUpdateDto,long) throws exception.CompraventaNoEncontradaException: [Field error in object 'compraventaUpdateDto' on field 'precioFinal': rejected value [-5.0]; codes [Min.compraventaUpdateDto.precioFinal,Min.precioFinal,Min.java.lang.Float,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [compraventaUpdateDto.precioFinal,precioFinal]; arguments []; default message [precioFinal],0]; default message [El precio debe ser mayor que cero]] 
2026-01-24 17:18:58,576 INFO c.n.r.c.CompraventaController [main] POST /compraventas - creando compraventa para productoId 1 entre compradorId 2 y vendedorId 3
2026-01-24 17:18:58,576 WARN c.n.r.c.GlobalExceptionHandler [main] Conflicto: producto ya vendido
2026-01-24 17:18:58,583 INFO c.n.r.c.CompraventaController [main] GET /compraventas/1 solicitado
2026-01-24 17:18:58,585 INFO c.n.r.c.CompraventaController [main] Compraventa con id 1 encontrada
2026-01-24 17:18:58,585 INFO c.n.r.c.CompraventaController [main] GET /compraventas/99 solicitado
2026-01-24 17:18:58,585 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CompraventaNoEncontradaException
2026-01-24 17:18:58,585 INFO c.n.r.c.CompraventaController [main] GET /compraventas - Filtros recibidos -> compradorId=99, vendedorId=null, productoId=null
2026-01-24 17:18:58,585 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:18:58,597 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.CompraventaOutDto> com.natalia.relab.controller.CompraventaController.agregarCompraventa(com.natalia.relab.dto.CompraventaInDto) throws exception.UsuarioNoEncontradoException,exception.ProductoNoEncontradoException,exception.ProductoYaVendidoException: [Field error in object 'compraventaInDto' on field 'productoId': rejected value [null]; codes [NotNull.compraventaInDto.productoId,NotNull.productoId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [compraventaInDto.productoId,productoId]; arguments []; default message [productoId]]; default message [Debe especificarse el producto comprado/vendido]] 
2026-01-24 17:18:58,643 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=null, productoId=5
2026-01-24 17:18:58,647 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=10, vendedorId=null, productoId=null
2026-01-24 17:18:58,649 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=20, productoId=null
2026-01-24 17:18:58,652 WARN c.n.r.s.CompraventaService [main] Servicio: Eliminar compraventa 999
2026-01-24 17:18:58,653 ERROR c.n.r.s.CompraventaService [main] Compraventa 999 no encontrada para eliminar
2026-01-24 17:18:58,656 WARN c.n.r.s.CompraventaService [main] Servicio: Eliminar compraventa 1
2026-01-24 17:18:58,656 INFO c.n.r.s.CompraventaService [main] Compraventa 1 eliminada correctamente
2026-01-24 17:18:58,659 INFO c.n.r.s.CompraventaService [main] Agregando compraventa de producto id 1 entre comprador id 2 y vendedor id 3
2026-01-24 17:18:58,659 WARN c.n.r.s.CompraventaService [main] Producto 1 ya ha sido vendido. Operación cancelada
2026-01-24 17:18:58,659 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=null, productoId=null
2026-01-24 17:18:58,666 INFO c.n.r.s.CompraventaService [main] Servicio: Modificar compraventa por ID 1
2026-01-24 17:18:58,666 INFO c.n.r.s.CompraventaService [main] Compraventa 1 actualizada correctamente
2026-01-24 17:18:58,666 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=null, productoId=5
2026-01-24 17:18:58,666 INFO c.n.r.s.CompraventaService [main] Servicio: Buscar compraventa por ID 999
2026-01-24 17:18:58,666 ERROR c.n.r.s.CompraventaService [main] Compraventa no encontrada con ID 999
2026-01-24 17:18:58,675 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=null, productoId=99
2026-01-24 17:18:58,675 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=999, productoId=null
2026-01-24 17:18:58,675 INFO c.n.r.s.CompraventaService [main] Servicio: Buscar compraventa por ID 1
2026-01-24 17:18:58,675 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=999, vendedorId=null, productoId=null
2026-01-24 17:18:58,675 INFO c.n.r.s.CompraventaService [main] Agregando compraventa de producto id 1 entre comprador id 2 y vendedor id 3
2026-01-24 17:18:58,691 INFO c.n.r.s.CompraventaService [main] Compraventa creada correctamente. ID=1
2026-01-24 17:18:58,691 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [com.natalia.relab.ProductoControllerTests]: ProductoControllerTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-24 17:18:58,691 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration com.natalia.relab.RelabApplication for test class com.natalia.relab.ProductoControllerTests
2026-01-24 17:18:58,707 INFO o.s.b.StartupInfoLogger [main] Starting ProductoControllerTests using Java 21.0.8 with PID 28248 (started by natal in D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab)
2026-01-24 17:18:58,707 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2026-01-24 17:18:58,867 INFO o.s.m.w.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2026-01-24 17:18:58,868 INFO o.s.w.s.FrameworkServlet [main] Initializing Servlet ''
2026-01-24 17:18:58,869 INFO o.s.w.s.FrameworkServlet [main] Completed initialization in 1 ms
2026-01-24 17:18:58,872 INFO o.s.b.StartupInfoLogger [main] Started ProductoControllerTests in 0.181 seconds (process running for 4.647)
2026-01-24 17:18:58,894 INFO c.n.r.c.ProductoController [main] POST /productos - creando nuevo producto. Nombre=Producto Test, UsuarioId=1, CategoriaId=999
2026-01-24 17:18:58,901 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CategoriaNoEncontradaException
2026-01-24 17:18:58,909 INFO c.n.r.c.ProductoController [main] PUT /productos/999 - actualización solicitada
2026-01-24 17:18:58,909 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: ProductoNoEncontradoException
2026-01-24 17:18:58,923 INFO c.n.r.c.ProductoController [main] GET /productos/999 - solicitando producto por ID
2026-01-24 17:18:58,925 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: ProductoNoEncontradoException
2026-01-24 17:18:58,925 INFO c.n.r.c.ProductoController [main] POST /productos - creando nuevo producto. Nombre=Producto Test, UsuarioId=999, CategoriaId=null
2026-01-24 17:18:58,925 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:18:58,935 INFO c.n.r.c.ProductoController [main] GET /productos - filtros: nombre=Producto Test, activo=null, categoriaId=null, usuarioId=null
2026-01-24 17:18:58,935 INFO c.n.r.c.ProductoController [main] GET /productos - encontrados 1 productos
2026-01-24 17:18:58,945 WARN c.n.r.c.ProductoController [main] DELETE /productos/999 - eliminación solicitada
2026-01-24 17:18:58,945 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: ProductoNoEncontradoException
2026-01-24 17:18:58,945 INFO c.n.r.c.ProductoController [main] GET /productos/1 - solicitando producto por ID
2026-01-24 17:18:58,945 INFO c.n.r.c.ProductoController [main] GET /productos/1 - producto encontrado correctamente
2026-01-24 17:18:58,957 WARN c.n.r.c.ProductoController [main] DELETE /productos/1 - eliminación solicitada
2026-01-24 17:18:58,957 WARN c.n.r.c.ProductoController [main] DELETE /productos/1 - producto eliminado
2026-01-24 17:18:58,964 INFO c.n.r.c.ProductoController [main] PUT /productos/1 - actualización solicitada
2026-01-24 17:18:58,965 INFO c.n.r.c.ProductoController [main] PUT /productos/1 - producto actualizado correctamente
2026-01-24 17:18:58,966 INFO c.n.r.c.ProductoController [main] GET /productos - filtros: nombre=null, activo=null, categoriaId=999, usuarioId=null
2026-01-24 17:18:58,966 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CategoriaNoEncontradaException
2026-01-24 17:18:58,972 INFO c.n.r.c.ProductoController [main] POST /productos - creando nuevo producto. Nombre=Producto Test, UsuarioId=1, CategoriaId=2
2026-01-24 17:18:58,972 INFO c.n.r.c.ProductoController [main] POST /productos - producto creado con ID 10
2026-01-24 17:18:58,972 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.ProductoOutDto> com.natalia.relab.controller.ProductoController.actualizarProducto(com.natalia.relab.dto.ProductoUpdateDto,long) throws exception.ProductoNoEncontradoException,exception.CategoriaNoEncontradaException: [Field error in object 'productoUpdateDto' on field 'nombre': rejected value []; codes [Size.productoUpdateDto.nombre,Size.nombre,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [productoUpdateDto.nombre,nombre]; arguments []; default message [nombre],2147483647,1]; default message [El nombre no puede estar vacío]] 
2026-01-24 17:18:58,972 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.ProductoOutDto> com.natalia.relab.controller.ProductoController.agregarProducto(com.natalia.relab.dto.ProductoInDto) throws exception.CategoriaNoEncontradaException,exception.UsuarioNoEncontradoException: [Field error in object 'productoInDto' on field 'nombre': rejected value [null]; codes [NotBlank.productoInDto.nombre,NotBlank.nombre,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [productoInDto.nombre,nombre]; arguments []; default message [nombre]]; default message [El nombre del producto es un campo obligatorio]] 
2026-01-24 17:18:58,994 WARN c.n.r.s.ProductoService [main] Producto 999 no encontrado
2026-01-24 17:18:58,994 WARN c.n.r.s.ProductoService [main] Servicio: eliminando producto 5
2026-01-24 17:18:58,994 WARN c.n.r.s.ProductoService [main] Producto 5 eliminado correctamente
2026-01-24 17:18:59,003 INFO c.n.r.s.ProductoService [main] Servicio: creando producto 'Producto1'
2026-01-24 17:18:59,003 WARN c.n.r.s.ProductoService [main] Usuario 99 no encontrado
2026-01-24 17:18:59,003 WARN c.n.r.s.ProductoService [main] Servicio: eliminando producto 999
2026-01-24 17:18:59,003 WARN c.n.r.s.ProductoService [main] Producto 999 no encontrado al intentar eliminar
2026-01-24 17:18:59,003 INFO c.n.r.s.ProductoService [main] Servicio: actualizando producto 1
2026-01-24 17:18:59,003 INFO c.n.r.s.ProductoService [main] Producto 1 actualizado correctamente
2026-01-24 17:18:59,019 INFO c.n.r.s.ProductoService [main] Servicio: actualizando producto 999
2026-01-24 17:18:59,019 WARN c.n.r.s.ProductoService [main] Producto 999 no encontrado al intentar actualizar
2026-01-24 17:18:59,034 INFO c.n.r.s.ProductoService [main] Servicio: creando producto 'Producto1'
2026-01-24 17:18:59,034 INFO c.n.r.s.ProductoService [main] Producto creado con ID 100
2026-01-24 17:18:59,040 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [com.natalia.relab.UsuarioControllerTests]: UsuarioControllerTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-24 17:18:59,050 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration com.natalia.relab.RelabApplication for test class com.natalia.relab.UsuarioControllerTests
2026-01-24 17:18:59,064 INFO o.s.b.StartupInfoLogger [main] Starting UsuarioControllerTests using Java 21.0.8 with PID 28248 (started by natal in D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab)
2026-01-24 17:18:59,064 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2026-01-24 17:18:59,203 INFO o.s.m.w.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2026-01-24 17:18:59,203 INFO o.s.w.s.FrameworkServlet [main] Initializing Servlet ''
2026-01-24 17:18:59,204 INFO o.s.w.s.FrameworkServlet [main] Completed initialization in 0 ms
2026-01-24 17:18:59,206 INFO o.s.b.StartupInfoLogger [main] Started UsuarioControllerTests in 0.156 seconds (process running for 4.982)
2026-01-24 17:18:59,206 INFO c.n.r.c.UsuarioController [main] GET /usuarios - filtros: nickname=user1, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:18:59,206 INFO c.n.r.c.UsuarioController [main] Resultado: 1 usuarios encontrados
2026-01-24 17:18:59,222 INFO c.n.r.c.UsuarioController [main] GET /usuarios/99 solicitado
2026-01-24 17:18:59,222 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:18:59,250 INFO c.n.r.c.UsuarioController [main] POST /usuarios - creando usuario con nickname natalia
2026-01-24 17:18:59,250 INFO c.n.r.c.UsuarioController [main] Usuario creado con id 1
2026-01-24 17:18:59,253 INFO c.n.r.c.UsuarioController [main] PUT /usuarios/5 - actualización solicitada
2026-01-24 17:18:59,262 INFO c.n.r.c.UsuarioController [main] Usuario 5 actualizado correctamente
2026-01-24 17:18:59,266 INFO c.n.r.c.UsuarioController [main] GET /usuarios - filtros: nickname=inexistente, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:18:59,266 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:18:59,269 INFO c.n.r.c.UsuarioController [main] GET /usuarios - filtros: nickname=null, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:18:59,269 INFO c.n.r.c.UsuarioController [main] Resultado: 2 usuarios encontrados
2026-01-24 17:18:59,269 INFO c.n.r.c.UsuarioController [main] PUT /usuarios/5 - actualización solicitada
2026-01-24 17:18:59,269 WARN c.n.r.c.GlobalExceptionHandler [main] Intento de creación con datos duplicados: NicknameYaExisteException
2026-01-24 17:18:59,269 INFO c.n.r.c.UsuarioController [main] PUT /usuarios/999 - actualización solicitada
2026-01-24 17:18:59,269 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:18:59,284 INFO c.n.r.c.UsuarioController [main] GET /usuarios/1 solicitado
2026-01-24 17:18:59,284 INFO c.n.r.c.UsuarioController [main] Usuario con id 1 encontrado
2026-01-24 17:18:59,292 WARN c.n.r.c.UsuarioController [main] DELETE /usuarios/5 solicitado
2026-01-24 17:18:59,292 INFO c.n.r.c.UsuarioController [main] Usuario 5 eliminado correctamente
2026-01-24 17:18:59,296 WARN c.n.r.c.UsuarioController [main] DELETE /usuarios/999 solicitado
2026-01-24 17:18:59,296 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:18:59,305 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.UsuarioOutDto> com.natalia.relab.controller.UsuarioController.agregarUsuario(com.natalia.relab.dto.UsuarioInDto) with 3 errors: [Field error in object 'usuarioInDto' on field 'password': rejected value [123]; codes [Size.usuarioInDto.password,Size.password,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [usuarioInDto.password,password]; arguments []; default message [password],2147483647,4]; default message [La contraseña debe tener al menos 4 carácteres]] [Field error in object 'usuarioInDto' on field 'email': rejected value [email-mal]; codes [Email.usuarioInDto.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [usuarioInDto.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@533a8540,.*]; default message [El formato de email no es válido]] [Field error in object 'usuarioInDto' on field 'nickname': rejected value []; codes [NotBlank.usuarioInDto.nickname,NotBlank.nickname,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [usuarioInDto.nickname,nickname]; arguments []; default message [nickname]]; default message [El nickname es un campo obligatorio]] 
2026-01-24 17:18:59,311 INFO c.n.r.s.UsuarioService [main] Buscando usuario por id 999
2026-01-24 17:18:59,312 ERROR c.n.r.s.UsuarioService [main] Usuario con id 999 no encontrado
2026-01-24 17:18:59,315 INFO c.n.r.s.UsuarioService [main] Modificando usuario con id 999
2026-01-24 17:18:59,315 ERROR c.n.r.s.UsuarioService [main] Usuario 999 no encontrado para modificar
2026-01-24 17:18:59,315 INFO c.n.r.s.UsuarioService [main] Agregando usuario con nickname usuarioExistente
2026-01-24 17:18:59,315 ERROR c.n.r.s.UsuarioService [main] Error: nickname usuarioExistente ya existe
2026-01-24 17:18:59,315 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=null, tipoUsuario=empresa, cuentaActiva=null
2026-01-24 17:18:59,315 INFO c.n.r.s.UsuarioService [main] Agregando usuario con nickname usuario1
2026-01-24 17:18:59,315 INFO c.n.r.s.UsuarioService [main] Usuario creado con id 42
2026-01-24 17:18:59,315 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=null, tipoUsuario=null, cuentaActiva=true
2026-01-24 17:18:59,331 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=null, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:18:59,331 INFO c.n.r.s.UsuarioService [main] Modificando usuario con id 5
2026-01-24 17:18:59,331 INFO c.n.r.s.UsuarioService [main] Usuario 5 modificado correctamente
2026-01-24 17:18:59,331 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=usuarioInexistente, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:18:59,331 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=usuario1, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:18:59,331 WARN c.n.r.s.UsuarioService [main] Eliminando usuario con id 999
2026-01-24 17:18:59,331 ERROR c.n.r.s.UsuarioService [main] No se puede eliminar, el usuario 999 no existe
2026-01-24 17:18:59,331 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=usuario1, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:18:59,350 INFO c.n.r.s.UsuarioService [main] Buscando usuario por id 10
2026-01-24 17:18:59,352 WARN c.n.r.s.UsuarioService [main] Eliminando usuario con id 10
2026-01-24 17:18:59,352 INFO c.n.r.s.UsuarioService [main] Usuario 10 eliminado
2026-01-24 17:19:29,417 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.3.Final
2026-01-24 17:19:29,455 INFO o.s.b.StartupInfoLogger [main] Starting AlquilerControllerTests using Java 21.0.8 with PID 16304 (started by natal in D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab)
2026-01-24 17:19:29,456 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2026-01-24 17:19:31,201 INFO o.s.m.w.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2026-01-24 17:19:31,203 INFO o.s.w.s.FrameworkServlet [main] Initializing Servlet ''
2026-01-24 17:19:31,205 INFO o.s.w.s.FrameworkServlet [main] Completed initialization in 1 ms
2026-01-24 17:19:31,237 INFO o.s.b.StartupInfoLogger [main] Started AlquilerControllerTests in 2.077 seconds (process running for 2.766)
2026-01-24 17:19:31,349 WARN c.n.r.c.AlquilerController [main] DELETE /alquileres/99 - eliminando
2026-01-24 17:19:31,355 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: AlquilerNoEncontradoException
2026-01-24 17:19:31,487 INFO c.n.r.c.AlquilerController [main] POST /alquileres - creando nuevo alquiler
2026-01-24 17:19:31,487 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: ProductoNoEncontradoException
2026-01-24 17:19:31,512 INFO c.n.r.c.AlquilerController [main] GET /alquileres - Parámetros: arrendadorId=99, arrendatarioId=null, productoId=null
2026-01-24 17:19:31,512 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:19:31,518 INFO c.n.r.c.AlquilerController [main] PUT /alquileres/99 - actualizando alquiler
2026-01-24 17:19:31,518 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: AlquilerNoEncontradoException
2026-01-24 17:19:31,534 WARN c.n.r.c.AlquilerController [main] DELETE /alquileres/1 - eliminando
2026-01-24 17:19:31,534 INFO c.n.r.c.AlquilerController [main] Alquiler con id 1 eliminado correctamente
2026-01-24 17:19:31,565 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.AlquilerOutDto> com.natalia.relab.controller.AlquilerController.actualizarAlquiler(com.natalia.relab.dto.AlquilerUpdateDto,long) throws exception.AlquilerNoEncontradoException: [Field error in object 'alquilerUpdateDto' on field 'precio': rejected value [-10.0]; codes [Min.alquilerUpdateDto.precio,Min.precio,Min.java.lang.Float,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [alquilerUpdateDto.precio,precio]; arguments []; default message [precio],0]; default message [El precio debe ser mayor que cero]] 
2026-01-24 17:19:31,613 INFO c.n.r.c.AlquilerController [main] GET /alquileres/1 solicitado
2026-01-24 17:19:31,613 INFO c.n.r.c.AlquilerController [main] Alquiler con id 1 encontrado
2026-01-24 17:19:31,631 INFO c.n.r.c.AlquilerController [main] GET /alquileres/99 solicitado
2026-01-24 17:19:31,632 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: AlquilerNoEncontradoException
2026-01-24 17:19:31,639 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.AlquilerOutDto> com.natalia.relab.controller.AlquilerController.agregarAlquiler(com.natalia.relab.dto.AlquilerInDto) throws exception.UsuarioNoEncontradoException,exception.ProductoNoEncontradoException with 4 errors: [Field error in object 'alquilerInDto' on field 'productoId': rejected value [null]; codes [NotNull.alquilerInDto.productoId,NotNull.productoId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [alquilerInDto.productoId,productoId]; arguments []; default message [productoId]]; default message [Debe especificarse el producto alquilado]] [Field error in object 'alquilerInDto' on field 'arrendadorId': rejected value [null]; codes [NotNull.alquilerInDto.arrendadorId,NotNull.arrendadorId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [alquilerInDto.arrendadorId,arrendadorId]; arguments []; default message [arrendadorId]]; default message [Debe especificarse el arrendador]] [Field error in object 'alquilerInDto' on field 'precio': rejected value [-10.0]; codes [Min.alquilerInDto.precio,Min.precio,Min.float,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [alquilerInDto.precio,precio]; arguments []; default message [precio],0]; default message [El precio debe ser mayor que cero]] [Field error in object 'alquilerInDto' on field 'arrendatarioId': rejected value [null]; codes [NotNull.alquilerInDto.arrendatarioId,NotNull.arrendatarioId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [alquilerInDto.arrendatarioId,arrendatarioId]; arguments []; default message [arrendatarioId]]; default message [Debe especificarse el arrendatario]] 
2026-01-24 17:19:31,643 INFO c.n.r.c.AlquilerController [main] GET /alquileres - Parámetros: arrendadorId=5, arrendatarioId=null, productoId=null
2026-01-24 17:19:31,643 INFO c.n.r.c.AlquilerController [main] Resultado: 1 alquileres encontrados
2026-01-24 17:19:31,659 INFO c.n.r.c.AlquilerController [main] GET /alquileres - Parámetros: arrendadorId=null, arrendatarioId=null, productoId=null
2026-01-24 17:19:31,659 INFO c.n.r.c.AlquilerController [main] Resultado: 2 alquileres encontrados
2026-01-24 17:19:31,659 INFO c.n.r.c.AlquilerController [main] PUT /alquileres/1 - actualizando alquiler
2026-01-24 17:19:31,659 INFO c.n.r.c.AlquilerController [main] Alquiler con id 1 actualizado correctamente
2026-01-24 17:19:31,674 INFO c.n.r.c.AlquilerController [main] POST /alquileres - creando nuevo alquiler
2026-01-24 17:19:31,674 INFO c.n.r.c.AlquilerController [main] Alquiler creado con id 100
2026-01-24 17:19:31,926 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=null, arrendatarioId=null, productoId=5
2026-01-24 17:19:31,941 INFO c.n.r.s.AlquilerService [main] Servicio: buscando alquiler por ID 999
2026-01-24 17:19:31,941 ERROR c.n.r.s.AlquilerService [main] No existe alquiler con ID 999
2026-01-24 17:19:31,948 INFO c.n.r.s.AlquilerService [main] Agregando nuevo alquiler: productoId 1, arrendadorId 2, arrendatarioId 3
2026-01-24 17:19:31,949 WARN c.n.r.s.AlquilerService [main] Producto con ID 1 no encontrado
2026-01-24 17:19:31,952 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=1, arrendatarioId=2, productoId=10
2026-01-24 17:19:31,952 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=null, arrendatarioId=null, productoId=999
2026-01-24 17:19:31,958 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=null, arrendatarioId=null, productoId=null
2026-01-24 17:19:31,961 WARN c.n.r.s.AlquilerService [main] Servicio: Intentando eliminar alquiler con ID 999
2026-01-24 17:19:31,964 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=null, arrendatarioId=999, productoId=null
2026-01-24 17:19:31,969 WARN c.n.r.s.AlquilerService [main] Servicio: Intentando eliminar alquiler con ID 1
2026-01-24 17:19:31,969 INFO c.n.r.s.AlquilerService [main] Alquiler con ID 1 eliminado correctamente
2026-01-24 17:19:31,975 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=999, arrendatarioId=null, productoId=null
2026-01-24 17:19:31,978 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=2, arrendatarioId=null, productoId=null
2026-01-24 17:19:31,981 INFO c.n.r.s.AlquilerService [main] Servicio: Listando alquileres con filtros: arrendadorId=null, arrendatarioId=3, productoId=null
2026-01-24 17:19:31,983 INFO c.n.r.s.AlquilerService [main] Servicio: buscando alquiler por ID 1
2026-01-24 17:19:31,987 INFO c.n.r.s.AlquilerService [main] Agregando nuevo alquiler: productoId 1, arrendadorId 2, arrendatarioId 3
2026-01-24 17:19:31,987 INFO c.n.r.s.AlquilerService [main] Alquiler creado correctamente con ID 1
2026-01-24 17:19:31,987 INFO c.n.r.s.AlquilerService [main] Servicio: Modificando alquiler con ID 1
2026-01-24 17:19:31,987 INFO c.n.r.s.AlquilerService [main] Servicio: Alquiler actualizado correctamente con ID 1
2026-01-24 17:19:31,987 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [com.natalia.relab.CategoriaControllerTests]: CategoriaControllerTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-24 17:19:32,003 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration com.natalia.relab.RelabApplication for test class com.natalia.relab.CategoriaControllerTests
2026-01-24 17:19:32,019 INFO o.s.b.StartupInfoLogger [main] Starting CategoriaControllerTests using Java 21.0.8 with PID 16304 (started by natal in D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab)
2026-01-24 17:19:32,019 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2026-01-24 17:19:32,206 INFO o.s.m.w.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2026-01-24 17:19:32,221 INFO o.s.w.s.FrameworkServlet [main] Initializing Servlet ''
2026-01-24 17:19:32,222 INFO o.s.w.s.FrameworkServlet [main] Completed initialization in 0 ms
2026-01-24 17:19:32,222 INFO o.s.b.StartupInfoLogger [main] Started CategoriaControllerTests in 0.219 seconds (process running for 3.755)
2026-01-24 17:19:32,222 INFO c.n.r.c.CategoriaController [main] GET /categorias/1 - Solicitando categoría por ID
2026-01-24 17:19:32,222 INFO c.n.r.c.CategoriaController [main] GET /categorias/1 - Categoría encontrada correctamente
2026-01-24 17:19:32,253 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.CategoriaOutDto> com.natalia.relab.controller.CategoriaController.agregarCategorias(com.natalia.relab.dto.CategoriaInDto) with 2 errors: [Field error in object 'categoriaInDto' on field 'nombre': rejected value []; codes [NotBlank.categoriaInDto.nombre,NotBlank.nombre,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categoriaInDto.nombre,nombre]; arguments []; default message [nombre]]; default message [El nombre es un campo obligatorio]] [Field error in object 'categoriaInDto' on field 'descripcion': rejected value [abcd]; codes [Size.categoriaInDto.descripcion,Size.descripcion,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categoriaInDto.descripcion,descripcion]; arguments []; default message [descripcion],2147483647,10]; default message [La descripción debe tener al menos 10 caracteres]] 
2026-01-24 17:19:32,268 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.CategoriaOutDto> com.natalia.relab.controller.CategoriaController.actualizarCategoria(com.natalia.relab.dto.CategoriaUpdateDto,long) throws exception.CategoriaNoEncontradaException with 2 errors: [Field error in object 'categoriaUpdateDto' on field 'descripcion': rejected value [Corta]; codes [Size.categoriaUpdateDto.descripcion,Size.descripcion,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categoriaUpdateDto.descripcion,descripcion]; arguments []; default message [descripcion],2147483647,10]; default message [La descripción debe tener al menos 10 caracteres]] [Field error in object 'categoriaUpdateDto' on field 'nombre': rejected value []; codes [Size.categoriaUpdateDto.nombre,Size.nombre,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categoriaUpdateDto.nombre,nombre]; arguments []; default message [nombre],2147483647,1]; default message [El nombre no puede estar vacío]] 
2026-01-24 17:19:32,268 WARN c.n.r.c.CategoriaController [main] DELETE /categorias/1 - Eliminación solicitada
2026-01-24 17:19:32,268 INFO c.n.r.c.CategoriaController [main] Categoría 1 eliminada correctamente
2026-01-24 17:19:32,291 INFO c.n.r.c.CategoriaController [main] PUT /categorias/1 - Actualización de categoría solicitada
2026-01-24 17:19:32,292 INFO c.n.r.c.CategoriaController [main] PUT /categorias/1 - Categoría actualizada correctamente
2026-01-24 17:19:32,296 WARN c.n.r.c.CategoriaController [main] DELETE /categorias/999 - Eliminación solicitada
2026-01-24 17:19:32,298 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CategoriaNoEncontradaException
2026-01-24 17:19:32,299 INFO c.n.r.c.CategoriaController [main] PUT /categorias/999 - Actualización de categoría solicitada
2026-01-24 17:19:32,299 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CategoriaNoEncontradaException
2026-01-24 17:19:32,299 INFO c.n.r.c.CategoriaController [main] POST /categorias - Creación de nueva categoría solicitada
2026-01-24 17:19:32,299 INFO c.n.r.c.CategoriaController [main] POST /categorias - Nueva categoría creada con ID 1
2026-01-24 17:19:32,299 INFO c.n.r.c.CategoriaController [main] GET /categorias/99 - Solicitando categoría por ID
2026-01-24 17:19:32,315 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CategoriaNoEncontradaException
2026-01-24 17:19:32,331 INFO c.n.r.c.CategoriaController [main] GET /categorías - filtros: nombre='Microscopios', activa=null, fechaCreacion=null, desde=null, hasta=null
2026-01-24 17:19:32,331 INFO c.n.r.c.CategoriaController [main] Se devolvieron 1 categorias
2026-01-24 17:19:32,331 INFO c.n.r.c.CategoriaController [main] GET /categorías - filtros: nombre='null', activa=null, fechaCreacion=null, desde=null, hasta=null
2026-01-24 17:19:32,331 INFO c.n.r.c.CategoriaController [main] Se devolvieron 2 categorias
2026-01-24 17:19:32,369 INFO c.n.r.s.CategoriaService [main] Buscando categoría por ID 99
2026-01-24 17:19:32,369 ERROR c.n.r.s.CategoriaService [main] Categoría 99 no encontrada
2026-01-24 17:19:32,369 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: null, fechaCreacion: null, desde: null, hasta: 2025-11-30
2026-01-24 17:19:32,369 INFO c.n.r.s.CategoriaService [main] Intentando crear nueva categoría
2026-01-24 17:19:32,369 INFO c.n.r.s.CategoriaService [main] Categoría creada con ID 1
2026-01-24 17:19:32,385 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: null, fechaCreacion: 2025-11-23, desde: null, hasta: null
2026-01-24 17:19:32,385 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: true, fechaCreacion: null, desde: null, hasta: null
2026-01-24 17:19:32,385 WARN c.n.r.s.CategoriaService [main] Intentando eliminar categoría 1
2026-01-24 17:19:32,385 INFO c.n.r.s.CategoriaService [main] Categoría 1 eliminada correctamente
2026-01-24 17:19:32,385 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: Centrífugas, activa: null, fechaCreacion: null, desde: null, hasta: null
2026-01-24 17:19:32,401 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: null, fechaCreacion: null, desde: 2025-11-01, hasta: 2025-11-30
2026-01-24 17:19:32,406 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: null, fechaCreacion: null, desde: null, hasta: null
2026-01-24 17:19:32,408 WARN c.n.r.s.CategoriaService [main] Intentando eliminar categoría 99
2026-01-24 17:19:32,408 ERROR c.n.r.s.CategoriaService [main] Categoría 99 no encontrada
2026-01-24 17:19:32,408 INFO c.n.r.s.CategoriaService [main] Intentando modificar categoría con ID 1
2026-01-24 17:19:32,408 INFO c.n.r.s.CategoriaService [main] Categoría 1 actualizada correctamente
2026-01-24 17:19:32,416 INFO c.n.r.s.CategoriaService [main] Listando categorías con filtros - nombre: null, activa: null, fechaCreacion: null, desde: 2025-11-01, hasta: null
2026-01-24 17:19:32,421 INFO c.n.r.s.CategoriaService [main] Buscando categoría por ID 1
2026-01-24 17:19:32,421 INFO c.n.r.s.CategoriaService [main] Intentando modificar categoría con ID 99
2026-01-24 17:19:32,421 ERROR c.n.r.s.CategoriaService [main] Categoría 99 no encontrada
2026-01-24 17:19:32,421 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [com.natalia.relab.CompraventaControllerTests]: CompraventaControllerTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-24 17:19:32,434 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration com.natalia.relab.RelabApplication for test class com.natalia.relab.CompraventaControllerTests
2026-01-24 17:19:32,448 INFO o.s.b.StartupInfoLogger [main] Starting CompraventaControllerTests using Java 21.0.8 with PID 16304 (started by natal in D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab)
2026-01-24 17:19:32,451 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2026-01-24 17:19:32,610 INFO o.s.m.w.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2026-01-24 17:19:32,611 INFO o.s.w.s.FrameworkServlet [main] Initializing Servlet ''
2026-01-24 17:19:32,612 INFO o.s.w.s.FrameworkServlet [main] Completed initialization in 1 ms
2026-01-24 17:19:32,613 INFO o.s.b.StartupInfoLogger [main] Started CompraventaControllerTests in 0.179 seconds (process running for 4.144)
2026-01-24 17:19:32,613 INFO c.n.r.c.CompraventaController [main] POST /compraventas - creando compraventa para productoId 1 entre compradorId 2 y vendedorId 3
2026-01-24 17:19:32,628 INFO c.n.r.c.CompraventaController [main] Compraventa creada con id 1
2026-01-24 17:19:32,628 INFO c.n.r.c.CompraventaController [main] POST /compraventas - creando compraventa para productoId 99 entre compradorId 1 y vendedorId 2
2026-01-24 17:19:32,628 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: ProductoNoEncontradoException
2026-01-24 17:19:32,628 INFO c.n.r.c.CompraventaController [main] GET /compraventas - Filtros recibidos -> compradorId=null, vendedorId=null, productoId=null
2026-01-24 17:19:32,628 INFO c.n.r.c.CompraventaController [main] Resultado: 1 compraventas encontradas
2026-01-24 17:19:32,647 WARN c.n.r.c.CompraventaController [main] DELETE /compraventas/1 solicitado
2026-01-24 17:19:32,648 INFO c.n.r.c.CompraventaController [main] Compraventa con id 1 eliminada correctamente
2026-01-24 17:19:32,653 WARN c.n.r.c.CompraventaController [main] DELETE /compraventas/99 solicitado
2026-01-24 17:19:32,653 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CompraventaNoEncontradaException
2026-01-24 17:19:32,660 INFO c.n.r.c.CompraventaController [main] PUT /compraventas/1 actualizando
2026-01-24 17:19:32,660 INFO c.n.r.c.CompraventaController [main] Compraventa con id 1 actualizada correctamente
2026-01-24 17:19:32,660 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.CompraventaOutDto> com.natalia.relab.controller.CompraventaController.actualizarCompraventa(com.natalia.relab.dto.CompraventaUpdateDto,long) throws exception.CompraventaNoEncontradaException: [Field error in object 'compraventaUpdateDto' on field 'precioFinal': rejected value [-5.0]; codes [Min.compraventaUpdateDto.precioFinal,Min.precioFinal,Min.java.lang.Float,Min]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [compraventaUpdateDto.precioFinal,precioFinal]; arguments []; default message [precioFinal],0]; default message [El precio debe ser mayor que cero]] 
2026-01-24 17:19:32,660 INFO c.n.r.c.CompraventaController [main] POST /compraventas - creando compraventa para productoId 1 entre compradorId 2 y vendedorId 3
2026-01-24 17:19:32,660 WARN c.n.r.c.GlobalExceptionHandler [main] Conflicto: producto ya vendido
2026-01-24 17:19:32,674 INFO c.n.r.c.CompraventaController [main] GET /compraventas/1 solicitado
2026-01-24 17:19:32,675 INFO c.n.r.c.CompraventaController [main] Compraventa con id 1 encontrada
2026-01-24 17:19:32,675 INFO c.n.r.c.CompraventaController [main] GET /compraventas/99 solicitado
2026-01-24 17:19:32,675 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CompraventaNoEncontradaException
2026-01-24 17:19:32,675 INFO c.n.r.c.CompraventaController [main] GET /compraventas - Filtros recibidos -> compradorId=99, vendedorId=null, productoId=null
2026-01-24 17:19:32,675 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:19:32,691 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.CompraventaOutDto> com.natalia.relab.controller.CompraventaController.agregarCompraventa(com.natalia.relab.dto.CompraventaInDto) throws exception.UsuarioNoEncontradoException,exception.ProductoNoEncontradoException,exception.ProductoYaVendidoException: [Field error in object 'compraventaInDto' on field 'productoId': rejected value [null]; codes [NotNull.compraventaInDto.productoId,NotNull.productoId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [compraventaInDto.productoId,productoId]; arguments []; default message [productoId]]; default message [Debe especificarse el producto comprado/vendido]] 
2026-01-24 17:19:32,721 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=null, productoId=5
2026-01-24 17:19:32,721 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=10, vendedorId=null, productoId=null
2026-01-24 17:19:32,737 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=20, productoId=null
2026-01-24 17:19:32,737 WARN c.n.r.s.CompraventaService [main] Servicio: Eliminar compraventa 999
2026-01-24 17:19:32,737 ERROR c.n.r.s.CompraventaService [main] Compraventa 999 no encontrada para eliminar
2026-01-24 17:19:32,737 WARN c.n.r.s.CompraventaService [main] Servicio: Eliminar compraventa 1
2026-01-24 17:19:32,745 INFO c.n.r.s.CompraventaService [main] Compraventa 1 eliminada correctamente
2026-01-24 17:19:32,747 INFO c.n.r.s.CompraventaService [main] Agregando compraventa de producto id 1 entre comprador id 2 y vendedor id 3
2026-01-24 17:19:32,747 WARN c.n.r.s.CompraventaService [main] Producto 1 ya ha sido vendido. Operación cancelada
2026-01-24 17:19:32,753 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=null, productoId=null
2026-01-24 17:19:32,753 INFO c.n.r.s.CompraventaService [main] Servicio: Modificar compraventa por ID 1
2026-01-24 17:19:32,753 INFO c.n.r.s.CompraventaService [main] Compraventa 1 actualizada correctamente
2026-01-24 17:19:32,753 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=null, productoId=5
2026-01-24 17:19:32,753 INFO c.n.r.s.CompraventaService [main] Servicio: Buscar compraventa por ID 999
2026-01-24 17:19:32,753 ERROR c.n.r.s.CompraventaService [main] Compraventa no encontrada con ID 999
2026-01-24 17:19:32,768 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=null, productoId=99
2026-01-24 17:19:32,768 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=null, vendedorId=999, productoId=null
2026-01-24 17:19:32,768 INFO c.n.r.s.CompraventaService [main] Servicio: Buscar compraventa por ID 1
2026-01-24 17:19:32,768 INFO c.n.r.s.CompraventaService [main] Servicio: Listar compraventas con filtros -> compradorId=999, vendedorId=null, productoId=null
2026-01-24 17:19:32,768 INFO c.n.r.s.CompraventaService [main] Agregando compraventa de producto id 1 entre comprador id 2 y vendedor id 3
2026-01-24 17:19:32,784 INFO c.n.r.s.CompraventaService [main] Compraventa creada correctamente. ID=1
2026-01-24 17:19:32,784 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [com.natalia.relab.ProductoControllerTests]: ProductoControllerTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-24 17:19:32,784 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration com.natalia.relab.RelabApplication for test class com.natalia.relab.ProductoControllerTests
2026-01-24 17:19:32,814 INFO o.s.b.StartupInfoLogger [main] Starting ProductoControllerTests using Java 21.0.8 with PID 16304 (started by natal in D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab)
2026-01-24 17:19:32,815 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2026-01-24 17:19:32,965 INFO o.s.m.w.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2026-01-24 17:19:32,966 INFO o.s.w.s.FrameworkServlet [main] Initializing Servlet ''
2026-01-24 17:19:32,966 INFO o.s.w.s.FrameworkServlet [main] Completed initialization in 0 ms
2026-01-24 17:19:32,970 INFO o.s.b.StartupInfoLogger [main] Started ProductoControllerTests in 0.169 seconds (process running for 4.497)
2026-01-24 17:19:32,987 INFO c.n.r.c.ProductoController [main] POST /productos - creando nuevo producto. Nombre=Producto Test, UsuarioId=1, CategoriaId=999
2026-01-24 17:19:32,987 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CategoriaNoEncontradaException
2026-01-24 17:19:33,008 INFO c.n.r.c.ProductoController [main] PUT /productos/999 - actualización solicitada
2026-01-24 17:19:33,008 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: ProductoNoEncontradoException
2026-01-24 17:19:33,008 INFO c.n.r.c.ProductoController [main] GET /productos/999 - solicitando producto por ID
2026-01-24 17:19:33,008 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: ProductoNoEncontradoException
2026-01-24 17:19:33,019 INFO c.n.r.c.ProductoController [main] POST /productos - creando nuevo producto. Nombre=Producto Test, UsuarioId=999, CategoriaId=null
2026-01-24 17:19:33,019 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:19:33,019 INFO c.n.r.c.ProductoController [main] GET /productos - filtros: nombre=Producto Test, activo=null, categoriaId=null, usuarioId=null
2026-01-24 17:19:33,019 INFO c.n.r.c.ProductoController [main] GET /productos - encontrados 1 productos
2026-01-24 17:19:33,034 WARN c.n.r.c.ProductoController [main] DELETE /productos/999 - eliminación solicitada
2026-01-24 17:19:33,039 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: ProductoNoEncontradoException
2026-01-24 17:19:33,046 INFO c.n.r.c.ProductoController [main] GET /productos/1 - solicitando producto por ID
2026-01-24 17:19:33,046 INFO c.n.r.c.ProductoController [main] GET /productos/1 - producto encontrado correctamente
2026-01-24 17:19:33,054 WARN c.n.r.c.ProductoController [main] DELETE /productos/1 - eliminación solicitada
2026-01-24 17:19:33,054 WARN c.n.r.c.ProductoController [main] DELETE /productos/1 - producto eliminado
2026-01-24 17:19:33,060 INFO c.n.r.c.ProductoController [main] PUT /productos/1 - actualización solicitada
2026-01-24 17:19:33,060 INFO c.n.r.c.ProductoController [main] PUT /productos/1 - producto actualizado correctamente
2026-01-24 17:19:33,066 INFO c.n.r.c.ProductoController [main] GET /productos - filtros: nombre=null, activo=null, categoriaId=999, usuarioId=null
2026-01-24 17:19:33,066 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: CategoriaNoEncontradaException
2026-01-24 17:19:33,066 INFO c.n.r.c.ProductoController [main] POST /productos - creando nuevo producto. Nombre=Producto Test, UsuarioId=1, CategoriaId=2
2026-01-24 17:19:33,066 INFO c.n.r.c.ProductoController [main] POST /productos - producto creado con ID 10
2026-01-24 17:19:33,066 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.ProductoOutDto> com.natalia.relab.controller.ProductoController.actualizarProducto(com.natalia.relab.dto.ProductoUpdateDto,long) throws exception.ProductoNoEncontradoException,exception.CategoriaNoEncontradaException: [Field error in object 'productoUpdateDto' on field 'nombre': rejected value []; codes [Size.productoUpdateDto.nombre,Size.nombre,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [productoUpdateDto.nombre,nombre]; arguments []; default message [nombre],2147483647,1]; default message [El nombre no puede estar vacío]] 
2026-01-24 17:19:33,082 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.ProductoOutDto> com.natalia.relab.controller.ProductoController.agregarProducto(com.natalia.relab.dto.ProductoInDto) throws exception.CategoriaNoEncontradaException,exception.UsuarioNoEncontradoException: [Field error in object 'productoInDto' on field 'nombre': rejected value [null]; codes [NotBlank.productoInDto.nombre,NotBlank.nombre,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [productoInDto.nombre,nombre]; arguments []; default message [nombre]]; default message [El nombre del producto es un campo obligatorio]] 
2026-01-24 17:19:33,095 WARN c.n.r.s.ProductoService [main] Producto 999 no encontrado
2026-01-24 17:19:33,097 WARN c.n.r.s.ProductoService [main] Servicio: eliminando producto 5
2026-01-24 17:19:33,097 WARN c.n.r.s.ProductoService [main] Producto 5 eliminado correctamente
2026-01-24 17:19:33,097 INFO c.n.r.s.ProductoService [main] Servicio: creando producto 'Producto1'
2026-01-24 17:19:33,097 WARN c.n.r.s.ProductoService [main] Usuario 99 no encontrado
2026-01-24 17:19:33,097 WARN c.n.r.s.ProductoService [main] Servicio: eliminando producto 999
2026-01-24 17:19:33,113 WARN c.n.r.s.ProductoService [main] Producto 999 no encontrado al intentar eliminar
2026-01-24 17:19:33,115 INFO c.n.r.s.ProductoService [main] Servicio: actualizando producto 1
2026-01-24 17:19:33,115 INFO c.n.r.s.ProductoService [main] Producto 1 actualizado correctamente
2026-01-24 17:19:33,115 INFO c.n.r.s.ProductoService [main] Servicio: actualizando producto 999
2026-01-24 17:19:33,129 WARN c.n.r.s.ProductoService [main] Producto 999 no encontrado al intentar actualizar
2026-01-24 17:19:33,129 INFO c.n.r.s.ProductoService [main] Servicio: creando producto 'Producto1'
2026-01-24 17:19:33,129 INFO c.n.r.s.ProductoService [main] Producto creado con ID 100
2026-01-24 17:19:33,140 INFO o.s.t.c.s.AnnotationConfigContextLoaderUtils [main] Could not detect default configuration classes for test class [com.natalia.relab.UsuarioControllerTests]: UsuarioControllerTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-24 17:19:33,147 INFO o.s.b.t.c.SpringBootTestContextBootstrapper [main] Found @SpringBootConfiguration com.natalia.relab.RelabApplication for test class com.natalia.relab.UsuarioControllerTests
2026-01-24 17:19:33,159 INFO o.s.b.StartupInfoLogger [main] Starting UsuarioControllerTests using Java 21.0.8 with PID 16304 (started by natal in D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab)
2026-01-24 17:19:33,160 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2026-01-24 17:19:33,281 INFO o.s.m.w.MockServletContext [main] Initializing Spring TestDispatcherServlet ''
2026-01-24 17:19:33,281 INFO o.s.w.s.FrameworkServlet [main] Initializing Servlet ''
2026-01-24 17:19:33,281 INFO o.s.w.s.FrameworkServlet [main] Completed initialization in 0 ms
2026-01-24 17:19:33,285 INFO o.s.b.StartupInfoLogger [main] Started UsuarioControllerTests in 0.135 seconds (process running for 4.816)
2026-01-24 17:19:33,285 INFO c.n.r.c.UsuarioController [main] GET /usuarios - filtros: nickname=user1, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:19:33,285 INFO c.n.r.c.UsuarioController [main] Resultado: 1 usuarios encontrados
2026-01-24 17:19:33,305 INFO c.n.r.c.UsuarioController [main] GET /usuarios/99 solicitado
2026-01-24 17:19:33,305 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:19:33,332 INFO c.n.r.c.UsuarioController [main] POST /usuarios - creando usuario con nickname natalia
2026-01-24 17:19:33,332 INFO c.n.r.c.UsuarioController [main] Usuario creado con id 1
2026-01-24 17:19:33,347 INFO c.n.r.c.UsuarioController [main] PUT /usuarios/5 - actualización solicitada
2026-01-24 17:19:33,347 INFO c.n.r.c.UsuarioController [main] Usuario 5 actualizado correctamente
2026-01-24 17:19:33,353 INFO c.n.r.c.UsuarioController [main] GET /usuarios - filtros: nickname=inexistente, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:19:33,353 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:19:33,353 INFO c.n.r.c.UsuarioController [main] GET /usuarios - filtros: nickname=null, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:19:33,353 INFO c.n.r.c.UsuarioController [main] Resultado: 2 usuarios encontrados
2026-01-24 17:19:33,365 INFO c.n.r.c.UsuarioController [main] PUT /usuarios/5 - actualización solicitada
2026-01-24 17:19:33,367 WARN c.n.r.c.GlobalExceptionHandler [main] Intento de creación con datos duplicados: NicknameYaExisteException
2026-01-24 17:19:33,370 INFO c.n.r.c.UsuarioController [main] PUT /usuarios/999 - actualización solicitada
2026-01-24 17:19:33,371 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:19:33,374 INFO c.n.r.c.UsuarioController [main] GET /usuarios/1 solicitado
2026-01-24 17:19:33,375 INFO c.n.r.c.UsuarioController [main] Usuario con id 1 encontrado
2026-01-24 17:19:33,377 WARN c.n.r.c.UsuarioController [main] DELETE /usuarios/5 solicitado
2026-01-24 17:19:33,377 INFO c.n.r.c.UsuarioController [main] Usuario 5 eliminado correctamente
2026-01-24 17:19:33,377 WARN c.n.r.c.UsuarioController [main] DELETE /usuarios/999 solicitado
2026-01-24 17:19:33,377 WARN c.n.r.c.GlobalExceptionHandler [main] Recurso no encontrado: UsuarioNoEncontradoException
2026-01-24 17:19:33,377 WARN c.n.r.c.GlobalExceptionHandler [main] Error de validación detectado: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.natalia.relab.dto.UsuarioOutDto> com.natalia.relab.controller.UsuarioController.agregarUsuario(com.natalia.relab.dto.UsuarioInDto) with 3 errors: [Field error in object 'usuarioInDto' on field 'password': rejected value [123]; codes [Size.usuarioInDto.password,Size.password,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [usuarioInDto.password,password]; arguments []; default message [password],2147483647,4]; default message [La contraseña debe tener al menos 4 carácteres]] [Field error in object 'usuarioInDto' on field 'nickname': rejected value []; codes [NotBlank.usuarioInDto.nickname,NotBlank.nickname,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [usuarioInDto.nickname,nickname]; arguments []; default message [nickname]]; default message [El nickname es un campo obligatorio]] [Field error in object 'usuarioInDto' on field 'email': rejected value [email-mal]; codes [Email.usuarioInDto.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [usuarioInDto.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@67263db7,.*]; default message [El formato de email no es válido]] 
2026-01-24 17:19:33,393 INFO c.n.r.s.UsuarioService [main] Buscando usuario por id 999
2026-01-24 17:19:33,393 ERROR c.n.r.s.UsuarioService [main] Usuario con id 999 no encontrado
2026-01-24 17:19:33,396 INFO c.n.r.s.UsuarioService [main] Modificando usuario con id 999
2026-01-24 17:19:33,398 ERROR c.n.r.s.UsuarioService [main] Usuario 999 no encontrado para modificar
2026-01-24 17:19:33,398 INFO c.n.r.s.UsuarioService [main] Agregando usuario con nickname usuarioExistente
2026-01-24 17:19:33,398 ERROR c.n.r.s.UsuarioService [main] Error: nickname usuarioExistente ya existe
2026-01-24 17:19:33,405 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=null, tipoUsuario=empresa, cuentaActiva=null
2026-01-24 17:19:33,407 INFO c.n.r.s.UsuarioService [main] Agregando usuario con nickname usuario1
2026-01-24 17:19:33,409 INFO c.n.r.s.UsuarioService [main] Usuario creado con id 42
2026-01-24 17:19:33,411 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=null, tipoUsuario=null, cuentaActiva=true
2026-01-24 17:19:33,415 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=null, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:19:33,417 INFO c.n.r.s.UsuarioService [main] Modificando usuario con id 5
2026-01-24 17:19:33,417 INFO c.n.r.s.UsuarioService [main] Usuario 5 modificado correctamente
2026-01-24 17:19:33,421 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=usuarioInexistente, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:19:33,421 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=usuario1, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:19:33,424 WARN c.n.r.s.UsuarioService [main] Eliminando usuario con id 999
2026-01-24 17:19:33,424 ERROR c.n.r.s.UsuarioService [main] No se puede eliminar, el usuario 999 no existe
2026-01-24 17:19:33,424 INFO c.n.r.s.UsuarioService [main] Listando usuarios con filtros nickname=usuario1, tipoUsuario=null, cuentaActiva=null
2026-01-24 17:19:33,424 INFO c.n.r.s.UsuarioService [main] Buscando usuario por id 10
2026-01-24 17:19:33,424 WARN c.n.r.s.UsuarioService [main] Eliminando usuario con id 10
2026-01-24 17:19:33,424 INFO c.n.r.s.UsuarioService [main] Usuario 10 eliminado
2026-01-24 17:28:28,376 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.3.Final
2026-01-24 17:28:28,406 INFO o.s.b.StartupInfoLogger [main] Starting RelabApplication using Java 21.0.8 with PID 10916 (D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab\target\classes started by natal in D:\DAM\Segundo\AccesoDatos\AA1\API_ReLab)
2026-01-24 17:28:28,406 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2026-01-24 17:28:28,741 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-24 17:28:28,773 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 29 ms. Found 5 JPA repository interfaces.
2026-01-24 17:28:29,113 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port 8080 (http)
2026-01-24 17:28:29,129 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2026-01-24 17:28:29,129 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2026-01-24 17:28:29,129 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-01-24 17:28:29,193 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2026-01-24 17:28:29,193 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 764 ms
2026-01-24 17:28:29,356 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-24 17:28:29,393 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.6.29.Final
2026-01-24 17:28:29,429 INFO o.h.c.i.RegionFactoryInitiator [main] HHH000026: Second-level cache disabled
2026-01-24 17:28:29,629 INFO o.s.o.j.p.SpringPersistenceUnitInfo [main] No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-24 17:28:29,656 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2026-01-24 17:28:29,767 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection org.mariadb.jdbc.Connection@3193e21d
2026-01-24 17:28:29,767 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2026-01-24 17:28:29,798 WARN o.h.e.j.d.i.DialectFactoryImpl [main] HHH90000025: MariaDBDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-24 17:28:29,818 INFO o.h.e.j.e.i.JdbcEnvironmentInitiator [main] HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 12.0.2
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-24 17:28:30,715 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-24 17:28:30,825 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-24 17:28:31,274 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-24 17:28:31,556 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2026-01-24 17:28:31,575 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port 8080 (http) with context path '/'
2026-01-24 17:28:31,580 INFO o.s.b.StartupInfoLogger [main] Started RelabApplication in 3.45 seconds (process running for 3.617)
2026-01-24 17:29:50,322 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-24 17:29:50,322 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2026-01-24 17:29:50,323 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 0 ms
2026-01-24 17:29:50,347 INFO c.n.r.c.CompraventaController [http-nio-8080-exec-2] GET /compraventas - Filtros recibidos -> compradorId=3, vendedorId=5, productoId=14
2026-01-24 17:29:50,348 INFO c.n.r.s.CompraventaService [http-nio-8080-exec-2] Servicio: Listar compraventas con filtros -> compradorId=3, vendedorId=5, productoId=14
2026-01-24 17:29:50,676 INFO c.n.r.c.CompraventaController [http-nio-8080-exec-2] Resultado: 1 compraventas encontradas
2026-01-24 17:30:51,007 INFO o.s.b.w.e.t.GracefulShutdown [SpringApplicationShutdownHook] Commencing graceful shutdown. Waiting for active requests to complete
2026-01-24 17:30:51,017 INFO o.s.b.w.e.t.GracefulShutdown [tomcat-shutdown] Graceful shutdown complete
2026-01-24 17:30:51,018 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-24 17:30:51,018 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2026-01-24 17:30:51,018 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
